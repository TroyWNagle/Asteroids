(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[function(t,i,e){t.exports=e(4)},function(t,i){Math.tau=2*Math.PI,Math.randomBetween=function(t,i){return Math.random()*(i-t)+t},Math.randomInt=function(t,i){var e=Math.floor(t),s=Math.ceil(i);return Math.round(Math.random()*(s-e))+e},Math.getDirection=function(t,i,e,s){var h=t-e,r=i-s,o=Math.sqrt(h*h+r*r),a=Math.acos(r/o);return h>0&&(a*=-1),a<0&&(a+=Math.tau),a},Math.getDir=function(t,i,e,s,h){var r=i-s,o=e-h,a=Math.acos(o/t);return r>0&&(a*=-1),a<0&&(a+=Math.tau),a},Math.getDistance=function(t,i,e,s){var h=t-e,r=i-s;return Math.sqrt(h*h+r*r)},Math.circleCollisionDetection=function(t,i,e,s,h,r){var o=t-s,a=i-h;return!(o>e+r||a>e+r)&&!(o*o+a*a>=(e+r)*(e+r))},Math.circleRectangleCollision=function(t,i,e,s,h,r,o){var a=s+r/2,n=h+o/2,l=Math.abs(t-a),c=Math.abs(i-n);return!(l>r/2+e)&&(!(c>o/2+e)&&(l<=r/2||(c<=o/2||Math.pow(l-r/2,2)+Math.pow(c-o/2,2)<=e*e)))}},function(t,i,e){},,function(t,i,e){"use strict";function s(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function h(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function r(t,i,e){return i&&h(t.prototype,i),e&&h(t,e),t}e.r(i);var o=function(){function t(i,e,h,r,o,a,n){s(this,t),this.x=i,this.y=e,this.life=a,this.decay=n,this.color=o,this.speed=Math.randomInt(1,r),this.direction=h,this.speedX=Math.cos(h)*this.speed,this.speedY=-Math.sin(h)*this.speed}return r(t,[{key:"updateSpeed",value:function(){this.speedX=Math.cos(this.direction)*this.speed,this.speedY=-Math.sin(this.direction)*this.speed}},{key:"update",value:function(){this.life--,this.decay&&this.speed>0&&(this.speed-=.05,this.updateSpeed()),this.x+=this.speedX,this.y+=this.speedY}},{key:"render",value:function(t){t.save(),t.fillStyle=this.color,t.beginPath(),t.arc(this.x,this.y,1,0,Math.tau),t.closePath(),t.fill(),t.restore()}}]),t}(),a=function(){function t(i,e){s(this,t),this.x=500,this.y=950,this.width=400,this.height=25,this.MAXBOOST=e,this.boost=i,this.particles=[],this.fillLength=this.width*(this.boost/this.MAXBOOST)}return r(t,[{key:"createParticles",value:function(t){for(var i=1+this.x-this.width/2,e=0;e<t;e++){var s=Math.randomBetween(this.y-this.height/2,this.y+this.height/2);this.particles.push(new o(i,s,0,5,"green",75,!1))}}},{key:"update",value:function(){this.fillLength=this.width*(this.boost/this.MAXBOOST),this.createParticles(3);for(var t=0;t<this.particles.length;t++)this.particles[t].update(),(this.particles[t].life<=0||this.particles[t].x>this.x-this.width/2+this.fillLength)&&this.particles.splice(t,1)}},{key:"render",value:function(t){t.save(),t.strokeStyle="blue",t.fillStyle="blue",t.globalAlpha=.3,t.strokeRect(this.x-this.width/2,this.y-this.height/2,this.width,this.height),t.fillRect(this.x-this.width/2,this.y-this.height/2,this.fillLength,this.height),this.particles.forEach(function(i){i.render(t)}),t.restore()}}]),t}(),n=function(){function t(i,e,h,r){s(this,t),this.x=i,this.y=e,this.timer=r,this.type=h,this.initColor()}return r(t,[{key:"initColor",value:function(){switch(this.type){case 1:this.color="red",this.string="Homing: ";break;case 2:this.color="red",this.string="Rapid: ";break;case 3:this.color="magenta",this.string="Shield: "}}},{key:"render",value:function(t){t.save(),t.fillStyle=this.color,t.font="25px Arial",t.globalAlpha=.6,t.fillText(this.string+(this.timer/60).toFixed(1),this.x,this.y),t.restore()}}]),t}(),l=function(){function t(){s(this,t),this.x=500,this.y=500,this.RATE=40,this.reloading=!1,this.rateOfFire=this.RATE,this.accel={mag:.1,dir:0},this.velocity={mag:0,dir:0},this.speed={x:0,y:0},this.radius=15,this.particles=[],this.color="green",this.MAXBOOST=120,this.boosting=!1,this.boost=120,this.boostRecharge=1,this.TOPSPEED=3,this.powerups={1:!1,2:!1,3:!1},this.powerupTimers={1:0,2:0,3:0},this.powerUpDisplays={1:"",2:"",3:""},this.boostGauge=new a(this.boost,this.MAXBOOST)}return r(t,[{key:"updateSpeed",value:function(t){this.speed.y+=-Math.cos(this.accel.dir)*t,this.speed.x+=Math.sin(this.accel.dir)*t,Math.abs(this.speed.x)>=this.TOPSPEED&&(this.speed.x<0?this.speed.x=-this.TOPSPEED:this.speed.x=this.TOPSPEED),Math.abs(this.speed.y)>=this.TOPSPEED&&(this.speed.y<0?this.speed.y=-this.TOPSPEED:this.speed.y=this.TOPSPEED)}},{key:"edgeDetection",value:function(){this.x<=-this.radius&&(this.x=1e3),this.y<=-this.radius&&(this.y=1e3),this.x>=1e3+this.radius&&(this.x=0),this.y>=1e3+this.radius&&(this.y=0)}},{key:"createParticles",value:function(t){for(var i=this.x-Math.sin(this.accel.dir)*this.radius,e=this.y+Math.cos(this.accel.dir)*this.radius,s=0;s<t;s++){var h=i+Math.randomBetween(-3,3),r=e+Math.randomBetween(-3,3),a=this.accel.dir+Math.randomBetween(-.174533,.174533);this.boosting&&this.boost>0?this.particles.push(new o(h,r,Math.PI+a,3,"blue",35,!0)):this.particles.push(new o(h,r,Math.PI+a,2,"red",20,!0))}}},{key:"checkPowerUps",value:function(){for(var t=1;t<=3;t++)this.powerups[t]&&(this.powerupTimers[t]--,this.powerUpDisplays[t].timer--,this.powerupTimers[t]<=0&&(this.powerups[t]=!1,this.powerUpDisplays[t]=""))}},{key:"updateVelocity",value:function(){var t=Math.sqrt(this.speed.x*this.speed.x+this.speed.y*this.speed.y),i=Math.acos(this.speed.y/t);this.speed.x<0&&(i*=-1),i<0&&(i+=Math.tau),this.velocity.mag=t,this.velocity.dir=i}},{key:"update",value:function(){this.edgeDetection(),this.x+=this.speed.x,this.y+=this.speed.y,this.updateVelocity(),this.checkPowerUps(),this.reloading&&(this.rateOfFire--,this.rateOfFire<=0&&(this.powerups[2]?this.rateOfFire=this.RATE/2:this.rateOfFire=this.RATE,this.reloading=!1)),!this.boosting&&this.boost<this.MAXBOOST&&(this.boostRecharge*=-1,1===this.boostRecharge&&(this.boost++,this.boostGauge.boost=this.boost));for(var t=0;t<this.particles.length;t++)this.particles[t].update(),this.particles[t].life<=0&&this.particles.splice(t,1);this.boostGauge.update()}},{key:"drawShield",value:function(t){t.save(),t.fillStyle="magenta",t.globalAlpha=.1,t.beginPath(),t.arc(this.x,this.y,1.3*this.radius,0,Math.tau),t.closePath(),t.fill(),t.restore()}},{key:"createPowerUpDisplay",value:function(t,i){this.powerUpDisplays[t]=new n(5,1===t?400:2===t?500:600,t,i)}},{key:"updatePowerUpDisplay",value:function(t,i){this.powerUpDisplays[t].timer+=i}},{key:"render",value:function(t){for(var i=1;i<4;i++)""!==this.powerUpDisplays[i]&&this.powerUpDisplays[i].render(t);t.save(),t.strokeStyle=this.color,t.beginPath(),t.translate(this.x,this.y),t.rotate(this.accel.dir),t.moveTo(0,-this.radius),t.lineTo(10,this.radius),t.lineTo(0,this.radius/1.5),t.lineTo(-10,this.radius),t.lineTo(0,-this.radius),t.stroke(),t.restore(),this.particles.forEach(function(i){i.render(t)}),this.powerups[3]&&this.drawShield(t),this.boostGauge.render(t)}}]),t}(),c=function(){function t(i,e,h,r){s(this,t),this.x=i,this.y=e,this.destroyed=!1,h<5&&(h=5),this.mass=h,this.radius=h,this.surfacePath=[],this.createSurface(),this.direction=r,this.velocity={x:0,y:0},this.angle=0,-1===this.direction?this.initVelocity():this.explodedVelocity()}return r(t,[{key:"initVelocity",value:function(){var t=Math.randomInt(8,10)/this.mass;this.x<0?this.velocity.x=Math.randomBetween(1,t):this.x>1e3+this.radius?this.velocity.x=-Math.randomBetween(1,t):this.velocity.x=Math.randomBetween(-t,t),this.y<0?this.velocity.y=Math.randomBetween(1,t):this.y>1e3+this.radius?this.velocity.y=-Math.randomBetween(1,t):this.velocity.y=Math.randomBetween(-t,t)}},{key:"createSurface",value:function(){for(var t,i,e=Math.tau/24,s=this.radius,h=0;h<24;h++)Math.randomInt(0,100)>70&&(s=Math.randomBetween(.8*this.radius,this.radius)),t=Math.cos(h*e)*s,i=-Math.sin(h*e)*s,this.surfacePath.push({x:t,y:i})}},{key:"explodedVelocity",value:function(){var t=Math.randomInt(9,12)/this.mass;this.velocity.x=Math.cos(this.direction)*t,this.velocity.y=-Math.sin(this.direction)*t}},{key:"edgeDetection",value:function(){this.x>=1e3+2.5*this.radius?this.x=-2.4*this.radius:this.x<=-2.5*this.radius&&(this.x=1e3+2.4*this.radius),this.y>=1e3+2.5*this.radius?this.y=-2.4*this.radius:this.y<=-2.5*this.radius&&(this.y=1e3+2.4*this.radius)}},{key:"update",value:function(){this.edgeDetection(),this.velocity.x>0?this.angle+=.01:this.angle-=.01,this.x+=this.velocity.x,this.y+=this.velocity.y}},{key:"render",value:function(t){t.save(),t.strokeStyle="white",t.translate(this.x,this.y),t.rotate(this.angle),t.beginPath(),t.moveTo(this.surfacePath[0].x,this.surfacePath[0].y);for(var i=1;i<this.surfacePath.length;i++)t.lineTo(this.surfacePath[i].x,this.surfacePath[i].y);t.closePath(),t.stroke(),t.restore()}}]),t}(),u=function(){function t(i,e,h,r){s(this,t),this.x=i,this.y=e,this.radius=3.5,this.color=r,h<0&&(h+=Math.tau),this.velocity={mag:5,dir:h},this.speed={x:0,y:0},this.initSpeed(),this.particles=[]}return r(t,[{key:"createParticles",value:function(t){for(var i=this.x-Math.sin(this.velocity.dir)*this.radius,e=this.y+Math.cos(this.velocity.dir)*this.radius,s=0;s<t;s++){var h=i+Math.randomBetween(-this.radius,this.radius),r=e+Math.randomBetween(-this.radius,this.radius);this.particles.push(new o(h,r,Math.PI*this.velocity.dir,1,this.color,10,!0))}}},{key:"initSpeed",value:function(){this.speed.x=Math.sin(this.velocity.dir)*this.velocity.mag,this.speed.y=-Math.cos(this.velocity.dir)*this.velocity.mag}},{key:"edgeDetection",value:function(){return this.x+this.radius>=1e3||this.x-this.radius<=0||this.y+this.radius>=1e3||this.y-this.radius<=0}},{key:"update",value:function(t){this.createParticles(Math.randomInt(3,6)),this.x+=this.speed.x,this.y+=this.speed.y;for(var i=0;i<this.particles.length;i++)this.particles[i].update(),this.particles[i].life<=0&&this.particles.splice(i,1)}},{key:"render",value:function(t){t.save(),t.strokeStyle=this.color,t.beginPath(),t.arc(this.x,this.y,this.radius,0,Math.tau),t.closePath(),t.stroke(),t.restore(),this.particles.forEach(function(i){i.render(t)})}}]),t}();function p(t){return(p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t){return(d="function"===typeof Symbol&&"symbol"===p(Symbol.iterator)?function(t){return p(t)}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":p(t)})(t)}function f(t,i){return!i||"object"!==d(i)&&"function"!==typeof i?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):i}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,i,e){return(v="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,i,e){var s=function(t,i){for(;!Object.prototype.hasOwnProperty.call(t,i)&&null!==(t=y(t)););return t}(t,i);if(s){var h=Object.getOwnPropertyDescriptor(s,i);return h.get?h.get.call(e):h.value}})(t,i,e||t)}function x(t,i){return(x=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function g(t,i){if("function"!==typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&x(t,i)}var k=function(t){function i(t,e,h,r){var o;return s(this,i),(o=f(this,y(i).call(this,t,e,h,r))).correction=.02617995,o.target=null,o.past=[],o.width=1,o}return g(i,u),r(i,[{key:"findTarget",value:function(t){for(var i=1e4,e=0;e<t.length;e++){var s=0;this.target!==t[e]&&(s=this.findDistance(t[e])),s<i&&(this.target=t[e],i=s)}1e4===i&&(this.target=null)}},{key:"findDistance",value:function(t){var i=this.x-t.x,e=this.y-t.y;return Math.sqrt(i*i+e*e)}},{key:"findDirection",value:function(t){var i=this.x-t.x,e=this.y-t.y,s=Math.sqrt(i*i+e*e),h=Math.acos(e/s);return i>0&&(h*=-1),h<0&&(h+=Math.tau),h}},{key:"adjustDirection",value:function(){var t=this.findDirection(this.target);this.velocity.dir<0&&(this.velocity.dir+=Math.tau);var i=this.velocity.dir-t;i>Math.PI&&(i-=Math.tau),i<-Math.PI&&(i+=Math.tau),i>0&&(this.velocity.dir-=this.correction),i<0&&(this.velocity.dir+=this.correction)}},{key:"storePast",value:function(){var t={x:this.x,y:this.y};this.past.push(t),this.past.length>30&&this.past.splice(0,1)}},{key:"alterPast",value:function(){this.past.forEach(function(t){t.x+=Math.randomBetween(-1,1),t.y+=Math.randomBetween(-1,1)})}},{key:"update",value:function(t){"green"===this.color?t.length>0&&this.findTarget(t):this.target=t,this.target&&(this.adjustDirection(),v(y(i.prototype),"initSpeed",this).call(this)),this.storePast(),this.x+=this.speed.x,this.y+=this.speed.y,this.alterPast()}},{key:"render",value:function(t){v(y(i.prototype),"render",this).call(this,t),t.save(),t.strokeStyle=this.color,t.lineWidth=this.width;for(var e=0;e<this.past.length-1;e++)t.beginPath(),t.moveTo(this.past[e].x,this.past[e].y),t.lineTo(this.past[e+1].x,this.past[e+1].y),t.stroke(),t.lineWidth+=.1;t.restore()}}]),i}(),w=function(t){function i(t,e){var h;return s(this,i),(h=f(this,y(i).call(this))).x=t,h.y=e,h.rotation=0,h.accel={mag:0,dir:0},h.acceleration=.2,h.asteroid="",h.innerRadius=10,h.radius=25,h.bufferRadius=60,h.critical=40,h.color="",h.type="",h.clock=0,h.bounty=0,h.setColor(),h.setClock(),h.rateOfFire=0,h.setRateOfFire(),h.lineSegments=[],h.initLineSegments(),h.goal="",h.initVelocity(),h}return g(i,l),r(i,[{key:"setColor",value:function(){var t,i=Math.randomInt(0,101);i>90?(t="fuchsia",this.type="Elite",this.bounty=500):i>85?(t="purple",this.type="Dodger",this.bounty=200):i>45?(t="blue",this.type="Hurler",this.bounty=150):(t="orange",this.bounty=100,this.type="Theif"),this.color=t}},{key:"setClock",value:function(){this.CLOCK=0,"Dodger"===this.type||"Elite"===this.color?(this.CLOCK=5,this.clock=this.CLOCK):"Hurler"===this.type?(this.CLOCK=30,this.clock=this.CLOCK):(this.CLOCK=60,this.clock=this.CLOCK)}},{key:"setRateOfFire",value:function(){"Dodger"===this.type||"Elite"===this.type?this.rateOfFire=Math.randomInt(150,350):"Hurler"===this.type?this.rateOfFire=Math.randomInt(300,700):this.rateOfFire=Math.randomInt(300,500),this.powerups[2]&&(this.rateOfFire=Math.round(this.rateOfFire/2))}},{key:"initLineSegments",value:function(){for(var t,i,e,s,h=0;h<6;h++){var r=Math.cos(h*Math.PI/3),o=Math.sin(h*Math.PI/3);t=r*this.innerRadius,i=r*this.radius,e=-o*this.innerRadius,s=-o*this.radius,this.lineSegments.push({xI:t,xF:i,yI:e,yF:s})}}},{key:"initVelocity",value:function(){this.goal={x:Math.randomBetween(200,800),y:Math.randomBetween(200,800)}}},{key:"updateSpeed",value:function(){this.speed.y+=-Math.cos(this.accel.dir)*this.accel.mag,this.speed.x+=Math.sin(this.accel.dir)*this.accel.mag,Math.abs(this.speed.x)>=1.5&&(this.speed.x<0?this.speed.x=-1.5:this.speed.x=1.5),Math.abs(this.speed.y)>=1.5&&(this.speed.y<0?this.speed.y=-1.5:this.speed.y=1.5)}},{key:"edgeDetection",value:function(){(this.x+this.bufferRadius>=1e3&&this.speed.x>0||this.x-this.bufferRadius<=0&&this.speed.x<0)&&(this.speed.x*=-1,this.accel.dir+=Math.PI/2,this.accel.mag=0),(this.y+this.bufferRadius>=1e3&&this.speed.y>0||this.y-this.bufferRadius<=0&&this.speed.y<0)&&(this.speed.y*=-1,this.accel.dir+=Math.PI/2,this.accel.mag=0)}},{key:"checkCollisions",value:function(t,i,e){for(var s=0;s<t.length;s++)if(Math.circleCollisionDetection(i,e,this.critical,t[s].x,t[s].y,t[s].radius))return!0;return!1}},{key:"goToGoal",value:function(){var t=Math.getDistance(this.x,this.y,this.goal.x,this.goal.y);this.accel.dir=Math.getDir(t,this.x,this.y,this.goal.x,this.goal.y),this.accel.mag=this.acceleration,t<this.radius&&(this.goal="")}},{key:"alterPath",value:function(t){this.accel.mag=this.acceleration,this.accel.dir=t,""!==this.goal&&(this.setClock(),this.clock--)}},{key:"catchAsteroid",value:function(t){this.asteroid=t,this.asteroid.velocity.x=this.speed.x,this.asteroid.velocity.y=this.speed.y}},{key:"orbitAsteroid",value:function(){var t=Math.getDistance(this.x,this.y,this.asteroid.x,this.asteroid.y),i=Math.getDir(t,this.x,this.y,this.asteroid.x,this.asteroid.y),e=this.x+Math.sin(i+.02)*t,s=this.y-Math.cos(i+.02)*t;this.asteroid.x=e,this.asteroid.y=s}},{key:"checkAsteroidAlignment",value:function(t){var i=Math.getDirection(this.x,this.y,this.asteroid.x,this.asteroid.y),e=i-Math.getDirection(this.x,this.y,t.x,t.y);if(Math.abs(e)<5*Math.PI/180){var s=30/this.asteroid.mass;this.speed.y+=-Math.cos(this.accel.dir)*this.accel.mag,this.speed.x+=Math.sin(this.accel.dir)*this.accel.mag,this.asteroid.velocity.x=Math.sin(i)*s,this.asteroid.velocity.y=-Math.cos(i)*s,this.asteroid=""}}},{key:"createParticles",value:function(t){for(var i=0;i<t;i++){var e=this.velocity.dir+Math.randomBetween(-Math.PI,0),s=this.x-Math.cos(e)*this.radius,h=this.y+Math.sin(e)*this.radius;this.particles.push(new o(s,h,Math.PI+this.velocity.dir,.7*this.velocity.mag,this.color,30,!0))}}},{key:"asteroidParticles",value:function(t){for(var i=this.asteroid.x,e=this.asteroid.y,s=0;s<t;s++){var h=Math.randomBetween(0,Math.tau),r=i+Math.cos(h)*this.asteroid.radius,a=e-Math.sin(h)*this.asteroid.radius;this.particles.push(new o(r,a,h+Math.PI/6,2,this.color,20,!0))}}},{key:"checkPowerUps",value:function(){for(var t=1;t<=3;t++)this.powerups[t]&&(this.powerupTimers[t]--,this.powerupTimers[t]<=0&&(this.powerups[t]=!1))}},{key:"update",value:function(){this.edgeDetection(),this.updateSpeed(),this.checkPowerUps(),v(y(i.prototype),"updateVelocity",this).call(this),this.clock<this.CLOCK&&(this.clock--,this.clock<=0&&this.setClock()),this.clock===this.CLOCK&&""!==this.goal&&this.goToGoal(),this.reloading&&(this.rateOfFire--,this.rateOfFire<=0&&(this.setRateOfFire(),this.reloading=!1)),this.speed.x>0?this.rotation+=.01:this.rotation-=.01,""!==this.asteroid&&(this.asteroid.destroyed?this.asteroid="":(this.asteroid.velocity.x=this.speed.x,this.asteroid.velocity.y=this.speed.y,this.orbitAsteroid(),this.asteroidParticles(1))),this.x+=this.speed.x,this.y+=this.speed.y,Math.random()>.5&&this.createParticles(1);for(var t=0;t<this.particles.length;t++)this.particles[t].update(),this.particles[t].life<=0&&this.particles.splice(t,1)}},{key:"render",value:function(t){t.save(),t.strokeStyle=this.color,t.translate(this.x,this.y),t.rotate(this.rotation),t.beginPath(),t.arc(0,0,this.innerRadius,0,Math.tau),t.closePath(),t.stroke(),t.beginPath(),t.arc(0,0,this.radius,0,Math.tau),t.closePath(),t.stroke(),this.lineSegments.forEach(function(i){t.beginPath(),t.moveTo(i.xI,i.yI),t.lineTo(i.xF,i.yF),t.stroke()}),t.restore(),this.particles.forEach(function(i){i.render(t)}),this.powerups[3]&&v(y(i.prototype),"drawShield",this).call(this,t)}}]),i}(),M=function(){function t(i,e,h){s(this,t),this.pos={x:i,y:e},this.type=h,this.radius=10,this.color="red",this.timer=0,this.lineSegments=[],this.initTimer(),this.initShape()}return r(t,[{key:"initTimer",value:function(){switch(this.type){case 1:this.timer=1e3;break;case 2:this.timer=1200;break;case 3:this.timer=3600,this.color="magenta"}}},{key:"initShape",value:function(){switch(this.type){case 1:this.initLineSegments()}}},{key:"initLineSegments",value:function(){for(var t,i,e,s,h=0;h<2;h++){var r=Math.cos(h*Math.PI/2),o=Math.sin(h*Math.PI/2);t=r*this.radius,i=-r*this.radius,e=-o*this.radius,s=o*this.radius,this.lineSegments.push({xI:t,xF:i,yI:e,yF:s})}}},{key:"render",value:function(t){t.save(),t.strokeStyle=this.color,t.translate(this.pos.x,this.pos.y),t.beginPath(),t.arc(0,0,this.radius,0,Math.tau),t.closePath(),t.stroke(),t.beginPath(),t.rect(1.3*-this.radius,1.3*-this.radius,2.6*this.radius,2.6*this.radius),t.closePath(),t.stroke(),this.lineSegments.forEach(function(i){t.beginPath(),t.moveTo(i.xI,i.yI),t.lineTo(i.xF,i.yF),t.stroke()}),t.restore()}}]),t}(),m=function(){function t(i,e,h,r){s(this,t),this.x=i,this.y=e,this.type=r,this.string="",this.life=0,this.size=0,this.initSettings(h),this.color="yellow"}return r(t,[{key:"initSettings",value:function(t){switch(this.type){case"blip":this.life=40,this.size=25,this.string="+ "+t;break;case"annoucement":this.life=80,this.size=50,this.string=t}}},{key:"update",value:function(){if(this.life--,this.life<=0)return!0}},{key:"render",value:function(t){t.save(),t.fillStyle=this.color,t.font=this.size+"px Arial",t.fillText(this.string,this.x,this.y),t.restore()}}]),t}(),b=function(){function t(i,e,h,r){s(this,t),this.x=i,this.y=e,this.type=h,this.info=r}return r(t,[{key:"render",value:function(t){t.save(),t.fillStyle="yellow",t.font="30px Arial",t.globalAlpha=.7,t.fillText(this.type+this.info,this.x,this.y),t.restore()}}]),t}(),C=(e(1),function(){function t(){s(this,t),this.sounds=[],this.over=new Audio("./gameOver.wav"),this.sounds.push(this.over),this.collisionSound=new Audio("collision.wav"),this.collisionSound.volume=.5,this.sounds.push(this.collisionSound),this.explosion=new Audio("./Explosion.wav"),this.explosion.volume=.7,this.sounds.push(this.explosion),this.shipExplosion=new Audio("./shipExplosion.wav"),this.sounds.push(this.shipExplosion),this.ufoLaser=new Audio("./ufoShot.wav"),this.sounds.push(this.ufoLaser),this.teleportSound=new Audio("./teleport.wav"),this.sounds.push(this.teleportSound)}return r(t,[{key:"adjustMasterVolume",value:function(t){this.sounds.forEach(function(i){i.volume+=t,i.volume<0&&(i.volume=0),i.volume>1&&(i.volume=1)})}},{key:"mute",value:function(){this.sounds.forEach(function(t){t.muted=!0})}},{key:"unmute",value:function(){this.sounds.forEach(function(t){t.muted=!1})}},{key:"trigger",value:function(t){switch(t){case"shoot":this.ufoLaser.play();break;case"collision":this.collisionSound.play();break;case"explosion":this.explosion.play();break;case"ship explosion":this.shipExplosion.play();break;case"teleport":this.teleportSound.play();break;case"game over":this.over.play()}}}]),t}()),S=function(){function t(i,e,h,r){s(this,t),this.screenSide=r,this.MAXUFO=5,this.MAXASTEROIDS=6,this.UFOTIME=500,this.POWERTIME=900,this.numAsteroids=3,this.ship=new l,this.ufos=[],this.kills=0,this.ufoTimer=Math.randomInt(this.UFOTIME,2*this.UFOTIME),this.respawning=!1,this.respawnTimer=300,this.projectiles=[],this.asteroids=[],this.createAsteroids(),this.particles=[],this.score=0,this.highscore=0,this.lives=3,this.level=1,this.popups=[],this.hudObjects={score:"",lives:"",level:""},this.initHUD(),this.constAsteroids=this.level*this.numAsteroids,this.teleports=10,this.coolingDown=50,this.powerups=[],this.powerupTimer=Math.randomInt(this.POWERTIME,3*this.POWERTIME),this.gameOver=!1,this.paused=!1,this.audioController=new C,this.keyMap={13:!1,32:!1,37:!1,38:!1,39:!1,65:!1,68:!1,70:!1,87:!1,88:!1},this.backBufferContext=i,this.backBufferCanvas=e,this.screenBufferContext=h,this.loop=this.loop.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleKeyUp=this.handleKeyUp.bind(this),window.onkeydown=this.handleKeyDown,window.onkeyup=this.handleKeyUp,this.interval=setInterval(this.loop,50/3)}return r(t,[{key:"masterReset",value:function(){this.ship=new l,this.ufos=[],this.ufoTimer=Math.randomInt(this.UFOTIME,2*this.UFOTIME),this.powerups=[],this.powerupTimer=Math.randomInt(this.POWERTIME,3*this.POWERTIME),this.respawning=!1,this.respawnTimer=300,this.projectiles=[],this.asteroids=[],this.numAsteroids=3,this.createAsteroids(),this.particles=[],this.score=0,this.lives=3,this.level=1,this.constAsteroids=this.level*this.numAsteroids,this.teleports=10,this.coolingDown=50,this.gameOver=!1,this.paused=!1}},{key:"handleKeyDown",value:function(t){t.preventDefault(),this.keyMap[t.keyCode]=!0,80===t.keyCode&&(this.paused?this.paused=!1:this.paused=!0),192===t.keyCode&&this.masterReset()}},{key:"handleKeyUp",value:function(t){t.preventDefault(),this.keyMap[t.keyCode]=!1}},{key:"initHUD",value:function(){this.hudObjects.score=new b(.45*this.screenSide,.05*this.screenSide,"Score: ",this.score),this.hudObjects.lives=new b(.03*this.screenSide,.97*this.screenSide,"Lives: ",this.lives),this.hudObjects.level=new b(.87*this.screenSide,.97*this.screenSide,"Level: ",this.level)}},{key:"createProjectile",value:function(){var t=this.ship.x+Math.sin(this.ship.accel.dir)*this.ship.radius*1.2,i=this.ship.y-Math.cos(this.ship.accel.dir)*this.ship.radius*1.2;this.ship.powerups[1]?this.projectiles.push(new k(t,i,this.ship.accel.dir,this.ship.color)):this.projectiles.push(new u(t,i,this.ship.accel.dir,this.ship.color)),this.ship.reloading=!0}},{key:"ufoProjectile",value:function(t,i,e){var s=t.x-i,h=t.y-e,r=Math.sqrt(s*s+h*h),o=Math.acos(h/r);s>0&&(o*=-1);var a=t.x+Math.sin(o)*t.radius*1.2,n=t.y-Math.cos(o)*t.radius*1.2;t.powerups[1]?this.projectiles.push(new k(a,n,o,t.color)):this.projectiles.push(new u(a,n,o,t.color)),this.audioController.trigger("shoot"),t.reloading=!0}},{key:"createAsteroids",value:function(){for(;this.asteroids.length<this.numAsteroids;)this.addAsteroid(-1)}},{key:"addAsteroid",value:function(t){for(var i,e,s,h,r=this.asteroids.length;r===this.asteroids.length;){var o=!1,a=Math.randomInt(1,5);h=Math.randomBetween(10,75),s=h,1===a?(i=Math.randomBetween(-2*s,this.screenSide+2*s),e=-2*s):2===a?(i=this.screenSide+2*s,e=Math.randomBetween(-2*s,this.screenSide+2*s)):3===a?(i=Math.randomBetween(-2*s,this.screenSide+2*s),e=this.screenSide+2*s):(i=-2*s,e=Math.randomBetween(-2*s,this.screenSide+2*s)),this.asteroids.forEach(function(t){Math.circleCollisionDetection(t.x,t.y,t.radius,i,e,s)&&(o=!0)}),o||this.asteroids.push(new c(i,e,h,t))}}},{key:"addUFO",value:function(){for(var t,i,e=this.ufos.length;e===this.ufos.length;){var s=!1,h=Math.randomInt(1,5);1===h?(t=Math.randomBetween(-50,1050),i=-50):2===h?(t=1050,i=Math.randomBetween(-50,1050)):3===h?(t=Math.randomBetween(-50,1050),i=1050):(t=-50,i=Math.randomBetween(-50,1050)),this.asteroids.forEach(function(e){Math.circleCollisionDetection(t,i,65,e.x,e.y,e.radius)&&(s=!0)}),s||this.ufos.push(new w(t,i))}}},{key:"createPowerUp",value:function(){var t=Math.randomInt(.1*this.screenSide,.9*this.screenSide),i=Math.randomInt(.1*this.screenSide,.9*this.screenSide),e=Math.random();e>.66?this.powerups.push(new M(t,i,1)):e>.33?this.powerups.push(new M(t,i,2)):this.powerups.push(new M(t,i,3))}},{key:"rotate",value:function(t,i){return{x:t.x*Math.cos(i)-t.y*Math.sin(i),y:t.x*Math.sin(i)+t.y*Math.cos(i)}}},{key:"particleCollision",value:function(t,i){var e=t.velocity.x-i.velocity.x,s=t.velocity.y-i.velocity.y;if(e*(i.x-t.x)+s*(i.y-t.y)>=0){var h=-Math.atan2(i.y-t.y,i.x-t.x),r=t.mass,o=i.mass,a=this.rotate(t.velocity,h),n=this.rotate(i.velocity,h),l={x:(a.x*(r-o)+2*o*n.x)/(r+o),y:a.y},c={x:(n.x*(o-r)+2*r*a.x)/(r+o),y:n.y},u=this.rotate(l,-h),p=this.rotate(c,-h);t.velocity.x=u.x,t.velocity.y=u.y,i.velocity.x=p.x,i.velocity.y=p.y}}},{key:"projectileDodger",value:function(t,i){var e=Math.getDistance(t.x,t.y,i.x,i.y);if(e<2*t.bufferRadius+i.radius){var s=Math.getDir(e,i.x,i.y,t.x,t.y);t.alterPath(s),t.setClock(),t.clock--}return e<t.radius+i.radius}},{key:"updateScore",value:function(t){this.score+=t,this.hudObjects.score.info=this.score}},{key:"handleAsteriodExplosion",value:function(t){var i=this.asteroids[t],e=i.mass,s=i.x,h=i.y;i.destroyed=!0,this.asteroids.splice(t,1),this.audioController.trigger("explosion");var r=Math.floor(100/e);if(this.popups.push(new m(s,h,r,"blip")),this.updateScore(r),e>=15){var o=Math.randomInt(2,4);this.numAsteroids+=o-1,e/=o;for(var a=Math.randomBetween(0,Math.tau),n=Math.tau/o,l=0;l<o;l++){var u=s+Math.cos(a)*e,p=h-Math.sin(a)*e;this.asteroids.push(new c(u,p,e,a)),a+=n}}else this.numAsteroids--}},{key:"detectShipCrash",value:function(t,i){var e=t.x-i.x,s=t.y-i.y,h=e*e+s*s;if(h<Math.pow(i.radius+t.radius,2))return!0;if(t.asteroid!==i){if(h<Math.pow(t.bufferRadius+i.radius,2)){var r=Math.getDir(h,i.x,i.y,t.x,t.y);t.alterPath(r),("Hurler"===t.type||"Elite"===t.type)&&i.radius<t.critical&&""===t.asteroid?t.catchAsteroid(i):h<Math.pow(t.critical+i.radius,2)&&(t.reloading||this.ufoProjectile(t,i.x,i.y))}return!1}}},{key:"explode",value:function(t,i,e){for(var s=Math.randomInt(30,70),h=Math.randomBetween(0,Math.tau),r=Math.randomInt(3,5),a=Math.randomInt(30,40),n=0;n<s;n++)Math.random()>.6&&(h=Math.randomBetween(0,Math.tau)),this.particles.push(new o(t,i,Math.PI+h,r,e,a,!0))}},{key:"teleport",value:function(){var t=this,i=Math.randomBetween(100,900),e=Math.randomBetween(100,900),s=!1;do{s&&(i=Math.randomBetween(100,900),e=Math.randomBetween(100,900),s=!1),this.ufos.forEach(function(h){Math.circleCollisionDetection(i,e,t.ship.radius,h.x,h.y,h.radius+100)&&(s=!0)}),this.asteroids.forEach(function(h){Math.circleCollisionDetection(i,e,t.ship.radius,h.x,h.y,h.radius+50)&&(s=!0)}),this.projectiles.forEach(function(h){Math.circleCollisionDetection(h.x,h.y,h.radius,i,e,t.ship.radius+50)&&(s=!0)})}while(s);this.explode(this.ship.x,this.ship.y,this.ship.color),this.explode(i,e,this.ship.color),this.audioController.trigger("teleport"),this.ship.x=i,this.ship.y=e,this.ship.speed.x=0,this.ship.speed.y=0}},{key:"respawn",value:function(){this.respawning=!0,this.lives--,this.hudObjects.lives.info=this.lives,this.lives>=0?this.ship=new l:(this.gameOver=!0,this.audioController.trigger("game over"))}},{key:"destoryUFO",value:function(t){var i=this.ufos[t];this.updateScore(i.bounty),this.popups.push(new m(i.x,i.y,i.bounty,"blip")),500===i.bounty&&(this.lives++,this.hudObjects.lives.info=this.lives,this.createBlip("1 life")),this.kills++,this.ufos.splice(t,1),this.audioController.trigger("ship explosion")}},{key:"checkHighScore",value:function(){this.score>this.highscore&&(this.highscore=this.score)}},{key:"createPowerUpBlip",value:function(t){var i="";switch(t){case 1:i="Homing Lasers";break;case 2:i="Rapid Fire";break;case 3:i="Force Field"}this.createBlip(i)}},{key:"createBlip",value:function(t){var i=Math.randomInt(20,50);this.ship.y>500?this.popups.push(new m(this.ship.x,this.ship.y-i,t,"blip")):this.popups.push(new m(this.ship.x,this.ship.y+i,t,"blip"))}},{key:"drawHUD",value:function(){this.HUDcontext.fillStyle="black",this.HUDcontext.strokeStyle="blue",this.HUDcontext.fillRect(0,0,this.screenSide,100),this.HUDcontext.font="30px Times New Roman",this.HUDcontext.strokeText("LIVES: "+this.lives,10,50),this.HUDcontext.strokeText("LEVEL: "+this.level,400,50),this.HUDcontext.strokeText("SCORE: "+this.score,800,50),this.HUDcontext.strokeText("TELEPORTS: "+this.teleports,550,50),this.HUDcontext.strokeText("HIGHSCORE: "+this.highscore,150,50),this.HUDcontext.font="20px Times New Roman",this.HUDcontext.strokeText("CONTROLS: ",10,75),this.HUDcontext.strokeText("W: Thurster  A: Rotate Left  D: Rotate Right  Space: Shoot  F: Teleport  P: Pause  ~: Reset",150,75)}},{key:"update",value:function(){for(var t=this,i=0;i<this.popups.length;i++)this.popups[i].update()&&this.popups.splice(i,1);this.ship.update(),this.ufos.forEach(function(i){if(("Theif"===i.type||"Elite"===i.type)&&""===i.goal&&t.powerups.length>0){var e=Math.randomInt(0,t.powerups.length-1);i.goal={x:t.powerups[e].pos.x,y:t.powerups[e].pos.y}}i.update(),""===i.asteroid||t.respawning||i.checkAsteroidAlignment(t.ship)}),this.asteroids.length<this.constAsteroids&&(this.addAsteroid(-1),this.numAsteroids++),this.asteroids.forEach(function(t){t.update()});var e=Math.ceil(this.level*this.level/2)+1;if(0!==this.kills&&this.kills%e===0){this.level++,this.hudObjects.level.info=this.level,this.popups.push(new m(450,500,"Level "+this.level,"annoucement")),this.lives++,this.hudObjects.lives.info=this.lives,this.createBlip("1 Life"),this.teleports+=this.level;var s=3+this.level;s>this.MAXASTEROIDS&&(s=this.MAXASTEROIDS);var h=s-this.asteroids.length;if(this.asteroids.length<s)for(var r=0;r<h;r++)this.addAsteroid(-1),this.numAsteroids++;this.constAsteroids=3+this.level,this.constAsteroids>this.MAXASTEROIDS&&(this.constAsteroids=this.MAXASTEROIDS)}if(this.ufoTimer>0&&this.ufos.length<this.MAXUFO&&(this.ufoTimer--,this.ufoTimer<=0)){this.addUFO();var o=this.ufos.length/this.level;this.ufoTimer=Math.randomInt(this.UFOTIME*o,2*this.UFOTIME*o)}if(this.powerupTimer--,this.powerupTimer<=0){this.createPowerUp();var a=2*this.powerups.length/this.level;this.powerupTimer=Math.randomInt(this.POWERTIME*a,2*this.POWERTIME*a)}this.respawning&&(this.respawnTimer--,this.respawnTimer<=0&&(this.respawnTimer=300,this.respawning=!1));for(var n=0;n<this.asteroids.length;n++)for(var l=n+1;l<this.asteroids.length;l++){var c=this.asteroids[n],u=this.asteroids[l];Math.circleCollisionDetection(c.x,c.y,c.radius,u.x,u.y,u.radius)&&(this.particleCollision(c,u),this.audioController.trigger("collision"))}for(var p=0;p<this.projectiles.length;p++)for(var d=0;d<this.asteroids.length;d++){var f=this.projectiles[p],y=this.asteroids[d];if(Math.circleCollisionDetection(f.x,f.y,f.radius,y.x,y.y,y.radius)){this.explode(f.x,f.y,f.color),this.projectiles.splice(p,1),this.explode(y.x,y.y,"white"),this.handleAsteriodExplosion(d);break}}this.respawning||this.asteroids.forEach(function(i){Math.circleCollisionDetection(t.ship.x,t.ship.y,t.ship.radius,i.x,i.y,i.radius)&&(t.explode(t.ship.x,t.ship.y,t.ship.color),t.audioController.trigger("ship explosion"),t.respawn())});for(var v=0;v<this.powerups.length;v++){var x=this.powerups[v];if(Math.circleCollisionDetection(this.ship.x,this.ship.y,this.ship.radius,x.pos.x,x.pos.y,x.radius)){this.explode(this.ship.x,this.ship.y,this.ship.color),this.ship.powerups[x.type]=!0,this.ship.powerupTimers[x.type]>0?this.ship.updatePowerUpDisplay(x.type,x.timer):this.ship.createPowerUpDisplay(x.type,x.timer),this.ship.powerupTimers[x.type]+=x.timer,this.createPowerUpBlip(x.type),2===x.type&&(this.ship.reloading=!1,this.ship.rateOfFire=this.ship.RATE/2),this.powerups.splice(v,1);break}for(var g=0;g<this.ufos.length;g++){var k=this.ufos[g];if(Math.circleCollisionDetection(k.x,k.y,k.radius,x.pos.x,x.pos.y,x.radius)){this.explode(k.x,k.y,k.color),k.powerups[x.type]=!0,k.powerupTimers[x.type]+=x.timer,2===x.type&&(k.reloading=!1,k.setRateOfFire()),this.powerups.splice(v,1);break}}}for(var w=0;w<this.powerups.length;w++)for(var M=0;M<this.asteroids.length;M++){var b=this.powerups[w],C=this.asteroids[M];if(Math.circleCollisionDetection(C.x,C.y,C.radius,b.pos.x,b.pos.y,b.radius)){this.explode(b.pos.x,b.pos.y,b.color),this.powerups.splice(w,1);break}}for(var S=0;S<this.ufos.length;S++)for(var B=0;B<this.asteroids.length;B++){var T=this.ufos[S],P=this.asteroids[B];if(this.detectShipCrash(T,P)){this.explode(T.x,T.y,T.color),this.destoryUFO(S);break}}if(this.ufos.length>1)for(var D=0;D<this.ufos.length;D++)for(var O=D+1;O<this.ufos.length;O++){var E=this.ufos[D],I=this.ufos[O];if(Math.circleCollisionDetection(E.x,E.y,E.critical,I.x,I.y,I.critical)){"Dodger"!==E.type&&"Elite"!==E.type||E.reloading||this.ufoProjectile(E,I.x,I.y),"Dodger"!==I.type&&"Elite"!==I.type||I.reloading||this.ufoProjectile(I,E.x,E.y);var A=Math.getDirection(E.x,E.y,I.x,I.y);E.alterPath(A+Math.PI),I.alterPath(A)}}this.respawning||this.ufos.forEach(function(i){Math.circleCollisionDetection(t.ship.x,t.ship.y,t.ship.radius,i.x,i.y,i.radius)&&(t.explode(t.ship.x,t.ship.y,t.ship.color),t.audioController.trigger("ship explosion"),t.respawn())});for(var R=0;R<this.projectiles.length;R++){var U=this.projectiles[R];if(!this.respawning&&Math.circleCollisionDetection(U.x,U.y,U.radius,this.ship.x,this.ship.y,this.ship.radius)){this.ship.powerups[3]?(this.explode(this.ship.x,this.ship.y,"magenta"),this.ship.powerups[3]=!1,this.ship.powerupTimers[3]=0):(this.explode(this.ship.x,this.ship.y,this.ship.color),this.audioController.trigger("ship explosion"),this.respawn()),this.explode(U.x,U.y,U.color),this.projectiles.splice(R,1);break}for(var j=0;j<this.ufos.length;j++){var F=this.ufos[j];if("Dodger"!==F.type&&"Elite"!==F.type||F.clock!==F.CLOCK){if(Math.circleCollisionDetection(U.x,U.y,U.radius,F.x,F.y,F.radius)){F.powerups[3]?(this.explode(F.x,F.y,"magenta"),F.powerups[3]=!1,F.powerupTimers[3]=0):(this.explode(F.x,F.y,F.color),this.destoryUFO(j),this.audioController.trigger("ship explosion")),this.explode(U.x,U.y,U.color),this.projectiles.splice(R,1);break}}else if(this.projectileDodger(F,U)){F.powerups[3]?(this.explode(F.x,F.y,"magenta"),F.powerups[3]=!1,F.powerupTimers[3]=0):(this.explode(F.x,F.y,F.color),this.destoryUFO(j),this.audioController.trigger("ship explosion")),this.explode(U.x,U.y,U.color),this.projectiles.splice(R,1);break}}}if((this.keyMap[65]||this.keyMap[37])&&(this.ship.accel.dir-=.07,this.ship.accel.dir<=-Math.tau&&(this.ship.accel.dir+=Math.tau)),(this.keyMap[68]||this.keyMap[39])&&(this.ship.accel.dir+=.07,this.ship.accel.dir>=Math.tau&&(this.ship.accel.dir-=Math.tau)),this.respawnTimer<=150||!this.respawning)if(this.ship.boosting=!1,this.keyMap[13]&&this.ship.boost>=0){this.ship.boosting=!0,this.ship.boost--,this.ship.boostGauge.boost=this.ship.boost,this.ship.updateSpeed(3*this.ship.accel.mag);var W=Math.floor(Math.randomBetween(4,8));this.ship.createParticles(W)}else if(this.keyMap[87]||this.keyMap[38]){this.ship.updateSpeed(this.ship.accel.mag);var L=Math.floor(Math.randomBetween(1,4));this.ship.createParticles(L)}if(!this.keyMap[32]||this.ship.reloading||this.respawning||(this.createProjectile(),this.audioController.trigger("shoot")),this.keyMap[70]&&this.teleports>0&&!this.respawning&&50===this.coolingDown&&(this.teleport(),this.teleports--,this.coolingDown--),!this.respawning)for(var H=0;H<this.ufos.length;H++){var K=this.ufos[H];K.rateOfFire--,K.rateOfFire<=0&&(this.ufoProjectile(K,this.ship.x,this.ship.y),K.setRateOfFire())}this.coolingDown<50&&(this.coolingDown--,this.coolingDown<=0&&(this.coolingDown=50));for(var X=0;X<this.projectiles.length;X++){var V=this.projectiles[X];"green"===V.color?V.update(this.ufos):V.update(this.ship),V.edgeDetection()&&this.projectiles.splice(X,1)}for(var G=0;G<this.particles.length;G++)this.particles[G].update(),this.particles[G].life<=0&&this.particles.splice(G,1);this.checkHighScore()}},{key:"render",value:function(){var t=this;this.backBufferContext.fillStyle="black",this.backBufferContext.strokeStyle="blue",this.backBufferContext.font="50px Times New Roman",this.backBufferContext.fillRect(0,0,this.screenSide,this.screenSide),this.respawning&&!this.gameOver&&(this.backBufferContext.save(),this.backBufferContext.globalAlpha=.5,this.backBufferContext.strokeText("RESPAWNING",350,500),this.backBufferContext.restore()),this.ufos.forEach(function(i){i.render(t.backBufferContext)}),(!this.respawning||this.respawnTimer<=150)&&this.ship.render(this.backBufferContext),this.asteroids.forEach(function(i){i.render(t.backBufferContext)}),this.projectiles.forEach(function(i){i.render(t.backBufferContext)}),this.powerups.forEach(function(i){i.render(t.backBufferContext)}),this.particles.forEach(function(i){i.render(t.backBufferContext)}),this.popups.forEach(function(i){i.render(t.backBufferContext)}),this.hudObjects.score.render(this.backBufferContext),this.hudObjects.lives.render(this.backBufferContext),this.hudObjects.level.render(this.backBufferContext),this.screenBufferContext.drawImage(this.backBufferCanvas,0,0)}},{key:"loop",value:function(){this.paused||this.gameOver||(this.update(),this.render()),this.gameOver&&(this.backBufferContext.font="50px Arial",this.backBufferContext.fillStyle="yellow",this.backBufferContext.fillText("GAME OVER",350,500),this.backBufferContext.fillText("Retry? Press ~",360,600),this.screenBufferContext.drawImage(this.backBufferCanvas,0,0)),this.paused&&(this.backBufferContext.font="50px Arial",this.backBufferContext.fillStyle="yellow",this.backBufferContext.fillText("Paused",425,600),this.screenBufferContext.drawImage(this.backBufferCanvas,0,0))}}]),t}();e(2);e.d(i,"default",function(){return B});var B=function(){function t(){s(this,t),this.screenWidth=1e3,this.gameState="main menu",this.highlighted=0,this.buttons=[],this.buttonNames=["start","options","controls"],this.initButtons(),this.backBufferCanvas=document.getElementById("canvas"),this.backBufferCanvas.width=this.screenWidth,this.backBufferCanvas.height=this.screenWidth,this.backBufferContext=this.backBufferCanvas.getContext("2d"),this.screenBufferCanvas=document.getElementById("canvas"),this.screenBufferCanvas.width=this.screenWidth,this.screenBufferCanvas.height=this.screenWidth,document.body.appendChild(this.screenBufferCanvas),this.screenBufferContext=this.screenBufferCanvas.getContext("2d"),this.render=this.render.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),window.onmousedown=this.handleMouseDown,window.onkeydown=this.handleKeyDown,this.interval=setInterval(this.render,50/3)}return r(t,[{key:"initButtons",value:function(){for(var t=.3,i=0;i<3;i++)this.buttons.push({x:.35*this.screenWidth,y:this.screenWidth*t,width:.3*this.screenWidth,height:.1*this.screenWidth}),t+=.15}},{key:"handleKeyDown",value:function(t){t.preventDefault(),"main menu"===this.gameState?(13===t.keyCode&&this.clickButton(this.buttonNames[this.highlighted]),87!==t.keyCode&&38!==t.keyCode||(this.highlighted--,this.highlighted<0&&(this.highlighted=this.buttons.length-1)),83!==t.keyCode&&40!==t.keyCode||(this.highlighted++,this.highlighted>=this.buttons.length&&(this.highlighted=0))):"controls"===this.gameState&&(this.gameState="main menu")}},{key:"handleMouseDown",value:function(t){t.preventDefault();var i=5*t.clientX/4,e=5*t.clientY/4;if("main menu"===this.gameState)for(var s=0;s<this.buttons.length;s++){Math.circleRectangleCollision(i,e,10,this.buttons[s].x,this.buttons[s].y,this.buttons[s].width,this.buttons[s].height)&&this.clickButton(s)}else"options"===this.gameState||"controls"===this.gameState&&(this.gameState="main menu")}},{key:"clickButton",value:function(t){switch(t){case"start":case 0:new S(this.backBufferContext,this.backBufferCanvas,this.screenBufferContext,this.screenWidth),this.gameState="game",clearInterval(this.interval);break;case"options":case 1:break;case"controls":case 2:this.gameState="controls"}}},{key:"drawMenu",value:function(){this.backBufferContext.fillStyle="black",this.backBufferContext.font="50px Arial",this.backBufferContext.fillRect(0,0,this.screenWidth,this.screenWidth),this.backBufferContext.save(),this.backBufferContext.fillStyle="blue";for(var t=0;t<this.buttons.length;t++)this.highlighted===t?this.backBufferContext.strokeStyle="cyan":this.backBufferContext.strokeStyle="blue",this.backBufferContext.strokeRect(this.buttons[t].x,this.buttons[t].y,this.buttons[t].width,this.buttons[t].height);this.backBufferContext.fillText("Start",.44*this.screenWidth,.37*this.screenWidth),this.backBufferContext.fillText("Options",.42*this.screenWidth,.52*this.screenWidth),this.backBufferContext.fillText("Controls",.41*this.screenWidth,.67*this.screenWidth),this.backBufferContext.restore(),this.screenBufferContext.drawImage(this.backBufferCanvas,0,0)}},{key:"drawControls",value:function(){this.backBufferContext.fillStyle="black",this.backBufferContext.font="50px Arial",this.backBufferContext.fillRect(0,0,this.screenWidth,this.screenWidth),this.backBufferContext.save(),this.backBufferContext.fillStyle="blue",this.backBufferContext.fillText("W or Up Arrow: Thruster",.2*this.screenWidth,.25*this.screenWidth),this.backBufferContext.fillText("A or Left Arrow: Rotate Left",.17*this.screenWidth,.35*this.screenWidth),this.backBufferContext.fillText("D or Right Arrow: Rotate Right",.15*this.screenWidth,.45*this.screenWidth),this.backBufferContext.fillText("Spacebar: Shoot",.29*this.screenWidth,.55*this.screenWidth),this.backBufferContext.fillText("Enter: Boost",.34*this.screenWidth,.65*this.screenWidth),this.backBufferContext.fillText("F: Teleport",.36*this.screenWidth,.75*this.screenWidth),this.backBufferContext.fillText("Any Key to Go Back",.26*this.screenWidth,.9*this.screenWidth),this.backBufferContext.restore(),this.screenBufferContext.drawImage(this.backBufferCanvas,0,0)}},{key:"render",value:function(){"main menu"===this.gameState?this.drawMenu():"controls"===this.gameState&&this.drawControls()}}]),t}();new B}],[[0,1]]]);
//# sourceMappingURL=main.5b5247a0.chunk.js.map