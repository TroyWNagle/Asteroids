{"version":3,"sources":["math.js","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/@babel/runtime/helpers/esm/createClass.js","particles.js","ship.js","asteroid.js","projectile.js","../node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/get.js","../node_modules/@babel/runtime/helpers/esm/superPropBase.js","../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/inherits.js","homing.js","ufo.js","powerup.js","audiocontroller.js","game.js","index.js"],"names":["Math","randomBetween","min","max","random","randomInt","lowest","floor","highest","ceil","round","getDirection","x","y","x2","y2","dx","dy","dist","sqrt","direction","acos","PI","getDistance","circleCollisionDetection","x1","y1","r1","r2","circleRectangleCollision","cx","cy","cr","rx","ry","rw","rh","rec","abs","pow","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","Particle","speed","color","life","this","startX","startY","alpha","values","high","low","clock","speedX","cos","speedY","sin","changeAlpha","ctx","save","fillStyle","globalAlpha","beginPath","arc","closePath","fill","restore","Ship","RATE","reloading","rateOfFire","accel","mag","dir","velocityDirection","radius","particles","MAXBOOST","boosting","boost","TOPSPEED","powerups","1","2","3","powerupTimers","acceleration","numParticles","push","angle","edgeDetection","updateDirection","checkPowerUps","j","update","splice","strokeStyle","translate","rotate","moveTo","lineTo","stroke","forEach","particle","render","drawShield","Asteroid","mass","destroyed","surfacePath","createSurface","velocity","initVelocity","explodedVelocity","randomRadius","context","Projectile","initSpeed","targets","createParticles","_typeof2","obj","Symbol","iterator","constructor","_typeof","_possibleConstructorReturn","self","call","ReferenceError","_assertThisInitialized","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","get_get","property","receiver","Reflect","get","base","object","hasOwnProperty","_superPropBase","desc","getOwnPropertyDescriptor","value","_setPrototypeOf","p","_inherits","subClass","superClass","create","Homing","_this","correction","shortest","distance","findDistance","findDirection","delta","findTarget","adjustDirection","UFO","rotation","asteroid","innerRadius","bufferRadius","critical","bounty","setColor","setRateOfFire","lineSegments","initLineSegments","goal","xi","xf","yi","yf","xI","xF","yI","yF","asteroids","player","error","magnitude","updateSpeed","goToGoal","orbitAsteroid","segment","PowerUp","type","pos","timer","initTimer","initShape","rect","AudioController","sounds","over","Audio","collisionSound","volume","explosion","shipExplosion","ufoLaser","teleportSound","change","sound","muted","play","Game","screenSide","MAXUFO","MAXASTEROIDS","UFOTIME","POWERTIME","numAsteroids","ship","ufos","kills","ufoTimer","respawning","respawnTimer","projectiles","createAsteroids","score","highscore","lives","level","constAsteroids","teleports","coolingDown","powerupTimer","gameOver","paused","audioController","keyMap","13","32","37","38","39","65","68","70","87","88","HUDcanvas","document","getElementById","width","height","HUDcontext","getContext","body","appendChild","backBufferCanvas","backBufferContext","screenBufferCanvas","screenBufferContext","loop","bind","handleKeyDown","handleKeyUp","window","onkeydown","onkeyup","interval","setInterval","event","preventDefault","keyCode","masterReset","ufo","tx","ty","trigger","addAsteroid","currLength","collision","spawnSide","otherAsteroid","xVelocityDiff","yVelocityDiff","atan2","m1","m2","u1","u2","v1","v2","vFinal1","vFinal2","projectile","alterPath","aID","angleChange","newX","newY","catchAsteroid","ufoProjectile","explode","ufoID","fillRect","font","strokeText","_this2","checkAsteroidAlignment","console","log","initAsteroids","difference","addUFO","createPowerUp","particleCollision","handleAsteriodExplosion","respawn","k","detectShipCrash","destoryUFO","projectileDodger","createProjectile","teleport","checkHighScore","_this3","drawHUD","powerup","drawImage","Menu","screenWidth","gameState","highlighted","buttons","onmousedown","handleMouseDown","preventDefualt"],"mappings":"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","file":"static/js/main.4da82b0f.chunk.js","sourcesContent":["//Custom math functions library\r\n\r\n\r\n/** @function Math.randomBetween\r\n  * Math prototype function built to easily create ranom floats\r\n  * @param {float} min - the lowest number you want\r\n  * @param {float} max - the highest number you want (I beleive it is non-inclusive)\r\n  * @returns random float between the parameters\r\n  */\r\nMath.randomBetween = function (min, max) {\r\n  return Math.random() * (max - min) + min;\r\n};\r\n\r\n/** @function Math.randomInt\r\n  * Math prototype function built to easily create random integers\r\n  * @param {float} min - the lowest number you want\r\n  * @param {float} max - the highest number you want (I beleive it is non-inclusive)\r\n  * @returns random integer between the parameters\r\n  */\r\nMath.randomInt = function (min, max) {\r\n  let lowest = Math.floor(min);\r\n  let highest = Math.ceil(max);\r\n  return Math.round(Math.random() * (highest - lowest)) + lowest;\r\n};\r\n\r\n/** @function Math.getDirection\r\n  * Math prototype funciton to get the direction between two points/objects\r\n  * @param {float} x - x position of object 1\r\n  * @param {float} y - y position of object 1\r\n  * @param {float} x2 - x position of object 2\r\n  * @param {float} y2 - y position of object 2\r\n  */\r\nMath.getDirection = function(x, y, x2, y2) {\r\n  //Get relative Distances\r\n  let dx = x - x2;\r\n  let dy = y - y2;\r\n  //Find hyp. of triangle\r\n  let dist = Math.sqrt(dx * dx + dy * dy);\r\n  //arcCosine of dy & hyp.\r\n  let direction = Math.acos(dy/dist);\r\n  //Flip the direction based on the relative x\r\n  if(dx > 0) {\r\n    direction *= -1;\r\n  }\r\n  if( direction < 0) {\r\n    direction += Math.PI * 2\r\n  }\r\n  return direction;\r\n};\r\n\r\nMath.getDistance = function(x, y, x2, y2) {\r\n  //Get relative Distances\r\n  let dx = x - x2;\r\n  let dy = y - y2;\r\n  //Find hyp. of triangle\r\n  let dist = Math.sqrt(dx * dx + dy * dy);\r\n  return dist;\r\n};\r\n\r\n/** @function circleCollisionDetection\r\n  * Function to detect collisions between two circles, kept as general\r\n  * as possible for maximum versatility\r\n  * @param {float} x1 - x position of object 1\r\n  * @param {float} y1 - y position of object 1\r\n  * @param {int/float} r1 - radius of object 1\r\n  * @param {float} x2 - x position of object 2\r\n  * @param {float} y2 - y position of object 2\r\n  * @param {int/float} r2 - radius of object 2\r\n  */\r\nMath.circleCollisionDetection = function(x1, y1, r1, x2, y2, r2) {\r\n  var dx = x1 - x2;\r\n  var dy = y1 - y2;\r\n  //Quick check to avoid having to square things\r\n  if(dx > r1 + r2 || dy > r1 + r2) {\r\n    return false;\r\n  }\r\n  //More accurate check\r\n  if(dx * dx + dy * dy >= (r1 + r2) * (r1 + r2)) {\r\n    return false;\r\n  }\r\n  return true;\r\n}\r\n\r\n/** @function circleRectangleCollision\r\n* funciton to handle collisions between circles and rectangles, which are pretty much just buttons\r\n* Again kept as general as possible for maximum versatility\r\n* @param {float} cx - x position of circle\r\n* @param {float} xy - y position of circle\r\n* @param {int/float} cr - radius of circle\r\n* @param {float} rx - x position of rectangle top left corner\r\n* @param {float} ry - y position of rectangle top left corner\r\n* @param {int} rw - width of rectangle\r\n* @param {int} rh - height of rectangle\r\n*/\r\nMath.circleRectangleCollision = function(cx, cy, cr, rx, ry, rw, rh) {\r\n  //Find the center of the button\r\n  let rec = {x: rx + rw / 2, y: ry + rh / 2}\r\n  //Distances between centers\r\n  let dx = Math.abs(cx - rec.x);\r\n  let dy = Math.abs(cy - rec.y);\r\n\r\n  //Broad distance check\r\n  if (dx > (rw / 2 + cr)) { return false; }\r\n  if (dy > (rh / 2 + cr)) { return false; }\r\n\r\n  //Single dimension checks\r\n  if (dx <= (rw / 2)) { return true; }\r\n  if (dy <= (rh / 2)) { return true; }\r\n\r\n  //Corner Check\r\n  let dist = Math.pow((dx - rw / 2) , 2) + Math.pow((dy - rh / 2), 2);\r\n  return (dist <= (cr * cr));\r\n}\r\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","\r\n/** @class Particle\r\n  * class to handle a particle's life\r\n  */\r\nexport default class Particle {\r\n  /** @constructor\r\n    * initialization of a particle\r\n    * @param floats x,y - position of the particle\r\n    * @param float direction - direction the particle will travel\r\n    * @param int speed - velocity of the particle\r\n    * @param string color - color of the particle\r\n    * @param int life - how many iterations the particle will last for\r\n    */\r\n  constructor(x, y, direction, speed, color, life) {\r\n    this.startX = x;\r\n    this.startY = y;\r\n    this.x = x;\r\n    this.y = y;\r\n    this.life = life;\r\n    this.color = color;\r\n    this.alpha = 1.0;\r\n    this.values = {high: 1.0, low: 0.7};\r\n    this.clock = 10;\r\n    this.speed = Math.randomInt(0, speed);\r\n    this.speedX = Math.cos(direction) * this.speed;\r\n    this.speedY = -Math.sin(direction) * this.speed;\r\n  }\r\n\r\n  changeAlpha() {\r\n    if(this.alpha === this.values.high) {\r\n      this.alpha = this.values.low;\r\n    }\r\n    else {\r\n      this.alpha = this.values.high;\r\n    }\r\n  }\r\n\r\n  /** @function update()\r\n    * function to updates the particle if it hasn't hit the decay distance\r\n    */\r\n  update() {\r\n    this.clock--;\r\n    if(this.clock <= 0) {\r\n      this.clock = 10;\r\n      this.changeAlpha();\r\n    }\r\n    this.life--;\r\n    this.x += this.speedX;\r\n    this.y += this.speedY;\r\n  }\r\n  /** @function render()\r\n    * standard render function\r\n    */\r\n  render(ctx) {\r\n    ctx.save();\r\n    ctx.fillStyle = this.color;\r\n    ctx.globalAlpha = this.alpha;\r\n    ctx.beginPath();\r\n    ctx.arc(this.x, this.y, 1, 0, Math.PI * 2);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n    ctx.restore();\r\n  }\r\n}\r\n","import Particle from './particles.js';\r\n\r\n\r\n/** @class Ship\r\n  * Class that handles everything ship related, Super class of UFO\r\n  */\r\nexport default class Ship {\r\n  /** @constructor\r\n    * Handles the initialization of a ship object\r\n    */\r\n  constructor() {\r\n    //position of the center of the Ship\r\n    this.x = 500;\r\n    this.y = 500;\r\n    this.RATE = 40;\r\n    this.reloading = false;\r\n    this.rateOfFire = this.RATE;\r\n    //Velocity to determine the magnitude/direction of the ship\r\n    //This is actually acceleration...\r\n    this.accel = {mag: 0.1, dir: 0.0};\r\n    this.velocityDirection = 0.0;\r\n    this.speed = {x: 0.0, y: 0.0};\r\n    this.radius = 15;\r\n    //particles for thruster trail\r\n    this.particles = [];\r\n    this.color = 'green';\r\n    this.MAXBOOST = 120;\r\n    this.boosting = false;\r\n    this.boost = 120;\r\n    this.TOPSPEED = 3.0;\r\n    // 1 = homing, 2 = rapid fire\r\n    this.powerups = {1: false, 2: false, 3: false};\r\n    this.powerupTimers = {1: 0, 2: 0, 3: 0};\r\n  }\r\n\r\n  /** @function updateSpeed()\r\n    * Handles the updating of the player's ship and enforces the speed limit\r\n    */\r\n  updateSpeed(acceleration) {\r\n    //Alter the direction\r\n    this.speed.y += -Math.cos(this.accel.dir) * acceleration;\r\n    this.speed.x += Math.sin(this.accel.dir) * acceleration;\r\n    //Enforce the max x speed\r\n    if(Math.abs(this.speed.x) >= this.TOPSPEED) {\r\n      if(this.speed.x < 0) {\r\n        this.speed.x = -this.TOPSPEED;\r\n      }\r\n      else {\r\n        this.speed.x = this.TOPSPEED;\r\n      }\r\n    }\r\n    //Enfore the max y speed\r\n    if(Math.abs(this.speed.y) >= this.TOPSPEED) {\r\n      if(this.speed.y < 0) {\r\n        this.speed.y = -this.TOPSPEED;\r\n      }\r\n      else {\r\n        this.speed.y = this.TOPSPEED;\r\n      }\r\n    }\r\n  }\r\n\r\n  /** @function edgeDetection()\r\n    * function to handle the player's ship passing the edge of the screen, wraps back around\r\n    */\r\n  edgeDetection() {\r\n    if(this.x <= -this.radius) {\r\n      this.x = 1000;\r\n    }\r\n    if(this.y <= -this.radius) {\r\n      this.y = 1000;\r\n    }\r\n    if(this.x >= 1000 + this.radius) {\r\n      this.x = 0;\r\n    }\r\n    if(this.y >= 1000 + this.radius) {\r\n      this.y = 0;\r\n    }\r\n  }\r\n\r\n  /** @function createParticles()\r\n    * function to handle creating the particles for the thruster trail\r\n    * @param int numParticles - number of particles to be created\r\n    */\r\n  createParticles(numParticles) {\r\n    //Get position of the back of the ship\r\n    var x = this.x - Math.sin(this.accel.dir) * this.radius;\r\n    var y = this.y + Math.cos(this.accel.dir) * this.radius;\r\n    for(var i = 0; i < numParticles; i++) {\r\n      //Create some noise on the starting position\r\n      var dx = x + Math.randomBetween(-3, 3);\r\n      var dy = y + Math.randomBetween(-3, 3);\r\n      //Create new Particle\r\n      if(this.boosting && this.boost > 0) {\r\n        this.particles.push(new Particle(dx, dy, Math.PI + this.accel.dir, 2.0, 'blue', 20));\r\n      }\r\n      else {\r\n        this.particles.push(new Particle(dx, dy, Math.PI + this.accel.dir, 1.0, 'red', 20));\r\n      }\r\n    }\r\n  }\r\n\r\n  checkPowerUps() {\r\n    for(let i = 1; i <= 2; i++) {\r\n      if(this.powerups[i]) {\r\n        this.powerupTimers[i]--;\r\n        if(this.powerupTimers[i] <= 0) {\r\n          this.powerups[i] = false;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  updateDirection() {\r\n    let mag = Math.sqrt(this.speed.x * this.speed.x + this.speed.y * this.speed.y);\r\n    let angle = Math.acos(this.speed.y / mag);\r\n    if(this.speed.x < 0) {\r\n      angle *= -1;\r\n    }\r\n    if(angle < 0) {\r\n      angle += Math.PI * 2\r\n    }\r\n    this.velocityDirection = angle;\r\n  }\r\n\r\n  /** @function update()\r\n    * handles the updating of the ships position and the particles tied to its trail\r\n    */\r\n  update() {\r\n    this.edgeDetection();\r\n    this.x += this.speed.x;\r\n    this.y += this.speed.y;\r\n    this.updateDirection();\r\n    this.checkPowerUps();\r\n    //Controlling the rate of fire\r\n    if(this.reloading) {\r\n      this.rateOfFire--;\r\n      if(this.rateOfFire <= 0) {\r\n        if(this.powerups[2]) {\r\n          this.rateOfFire = this.RATE / 2\r\n        }\r\n        else {\r\n          this.rateOfFire = this.RATE;\r\n        }\r\n        this.reloading = false;\r\n      }\r\n    }\r\n\r\n    if(!this.boosting && this.boost < this.MAXBOOST) {\r\n      this.boost++;\r\n    }\r\n\r\n    //Particle effect for the thruster\r\n    for(var j = 0; j < this.particles.length; j++) {\r\n      this.particles[j].update();\r\n      if(this.particles[j].life <= 0) {\r\n        this.particles.splice(j, 1);\r\n      }\r\n    }\r\n  }\r\n\r\n  drawShield(ctx) {\r\n    ctx.save();\r\n    ctx.fillStyle = 'magenta';\r\n    ctx.globalAlpha = 0.1;\r\n    ctx.beginPath();\r\n    ctx.arc(this.x, this.y, this.radius * 1.3, 0, Math.PI * 2);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n    ctx.restore();\r\n  }\r\n\r\n  /** @function render()\r\n    * function to draw the ship and the particles for the thruster trail\r\n    * @param context ctx - the backBufferContext from game.js\r\n    */\r\n  render(ctx) {\r\n    ctx.save()\r\n    ctx.strokeStyle = this.color;\r\n    ctx.beginPath();\r\n    //Enable accurate rotation\r\n    ctx.translate(this.x, this.y);\r\n    ctx.rotate(this.accel.dir);\r\n    //Draw ship\r\n    ctx.moveTo(0, -this.radius);\r\n    ctx.lineTo(10, this.radius);\r\n    ctx.lineTo(0, this.radius / 1.5);\r\n    ctx.lineTo(-10, this.radius);\r\n    ctx.lineTo(0, -this.radius);\r\n    ctx.stroke();\r\n    ctx.restore();\r\n    //Render particles\r\n    this.particles.forEach(particle => {\r\n      particle.render(ctx);\r\n    });\r\n    if(this.powerups[3]) {\r\n      this.drawShield(ctx);\r\n    }\r\n  }\r\n}\r\n","\r\n/** @class Asteroid\r\n  * Class that handles the construction and data of an Asteroid\r\n  */\r\nexport default class Asteroid {\r\n  /** @constructor\r\n    * Initializes all the properties of the asteroid\r\n    * @param floats x, y - position of te asteroid to be created\r\n    * @param float mass - mass of the asteroid, also the radius, mass to radius ratio 1:1\r\n    * @param float direction - direction in radians of the asteroid's speed, -1.0 if the asteroid is being created from scratch\r\n    */\r\n  constructor(x, y, mass, direction) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.destroyed = false;\r\n    //if somehow this gets called with a mass less than 5\r\n    if(mass < 5) {\r\n      mass = 5;\r\n    }\r\n    this.mass = mass;\r\n    this.radius = mass;\r\n    this.surfacePath = [];\r\n    this.createSurface();\r\n    this.direction = direction;\r\n    this.velocity = {x: 0.0, y: 0.0};\r\n    this.angle = 0.0;\r\n    //direction is not -1 if the asteroid has exploded\r\n    if(this.direction === -1.0) {\r\n      this.initVelocity();\r\n    }\r\n    else {\r\n      this.explodedVelocity();\r\n    }\r\n  }\r\n\r\n  /** @function initVelocity()\r\n    * function to initalize the velocity of the asteroid from scratch\r\n    */\r\n  initVelocity() {\r\n    //Sets speed of the asteroids, more mass = slower\r\n    var mag = Math.randomInt(8, 10) / this.mass;\r\n    if(this.x < 0) {\r\n      this.velocity.x = Math.randomBetween(1.0, mag);\r\n    }\r\n    else if(this.x > 1000 + this.radius){\r\n      this.velocity.x = -Math.randomBetween(1.0, mag);\r\n    }\r\n    else {\r\n      this.velocity.x = Math.randomBetween(-mag, mag);\r\n    }\r\n    if(this.y < 0) {\r\n      this.velocity.y = Math.randomBetween(1.0, mag);\r\n    }\r\n    else  if(this.y > 1000 + this.radius){\r\n      this.velocity.y = -Math.randomBetween(1.0, mag);\r\n    }\r\n    else {\r\n      this.velocity.y = Math.randomBetween(-mag, mag);\r\n    }\r\n  }\r\n\r\n  /** @function createSurface()\r\n    * function to create some 'noise' on the asteroid's surface\r\n    */\r\n  createSurface() {\r\n    var segments = 24;\r\n    //15 degree increments\r\n    var angle = Math.PI * 2 / segments;\r\n    var randomRadius = this.radius;\r\n    var x;\r\n    var y;\r\n    for(var i = 0; i < segments; i++) {\r\n      if(Math.randomInt(0, 100) > 70) {\r\n        randomRadius = Math.randomBetween(this.radius * 0.80, this.radius);\r\n      }\r\n      x = Math.cos(i * angle) * randomRadius;\r\n      y = -Math.sin(i * angle) * randomRadius;\r\n      this.surfacePath.push({x: x, y: y});\r\n    }\r\n  }\r\n\r\n  /** @function explodedVelocity()\r\n    * function to initalize velocities from asteroids that have spawned from an Explosion\r\n    */\r\n  explodedVelocity() {\r\n    //Sets speed of the asteroids, more mass = slower\r\n    var mag = Math.randomInt(9, 12) / this.mass;\r\n    //Uses the direction given to ensure the asteroids leave the center of the original asteroid\r\n    this.velocity.x = Math.cos(this.direction) * mag;\r\n    this.velocity.y = -Math.sin(this.direction) * mag;\r\n  }\r\n\r\n  /** @function edgeDetection()\r\n    * function to handle the asteroid leaving the edge of the screen\r\n    */\r\n  edgeDetection() {\r\n    if(this.x >= 1000 + 2.5 * this.radius) {\r\n      this.x = -2.4 * this.radius;\r\n    }\r\n    else if(this.x <= -2.5 * this.radius) {\r\n      this.x = 1000 + 2.4 * this.radius;\r\n    }\r\n    if(this.y >= 1000 + 2.5 * this.radius) {\r\n      this.y = -2.4 * this.radius;\r\n    }\r\n    else if(this.y <= -2.5 * this.radius) {\r\n      this.y = 1000 + 2.4 * this.radius;\r\n    }\r\n  }\r\n\r\n  /** @function update()\r\n    * handles the updating of asteroids speed and position\r\n    */\r\n  update() {\r\n    this.edgeDetection();\r\n    if(this.velocity.x > 0) {\r\n      this.angle += 0.01;\r\n    }\r\n    else {\r\n      this.angle -= 0.01;\r\n    }\r\n    this.x += this.velocity.x;\r\n    this.y += this.velocity.y;\r\n  }\r\n\r\n  /** @function render()\r\n    * function that handles drawing the asteroids\r\n    * @param context context - backBufferContext from game.js\r\n    */\r\n  render(context) {\r\n    context.save();\r\n    context.strokeStyle = 'white';\r\n    context.translate(this.x, this.y);\r\n    context.rotate(this.angle);\r\n    context.beginPath();\r\n    //Draw the noisy surface\r\n    context.moveTo(this.surfacePath[0].x,this.surfacePath[0].y);\r\n    for(var i = 1; i < this.surfacePath.length; i++) {\r\n      context.lineTo(this.surfacePath[i].x, this.surfacePath[i].y);\r\n    }\r\n    context.closePath();\r\n    context.stroke();\r\n    context.restore();\r\n  }\r\n}\r\n","import Particle from './particles.js';\r\n\r\n/** @class Projectile\r\n  * Class to handle projectiles\r\n  */\r\nexport default class Projectile {\r\n  constructor(x, y, direction, color) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.radius = 3.5;\r\n    this.color = color;\r\n    if(direction < 0) {\r\n      direction += Math.PI * 2\r\n    }\r\n    this.velocity = {mag: 5.0, dir: direction};\r\n    this.speed = {x: 0.0, y: 0.0};\r\n    this.initSpeed();\r\n    //Particle trail of the projectile\r\n    this.particles = [];\r\n  }\r\n\r\n  /** @function createParticles()\r\n    * function to handle creating the particles for trail of the projectile\r\n    * @param int numParticles - number of particles to be created\r\n    */\r\n  createParticles(numParticles) {\r\n    //Get the back of the projectile\r\n    var x = this.x - Math.sin(this.velocity.dir)* this.radius;\r\n    var y = this.y + Math.cos(this.velocity.dir)* this.radius;\r\n    for(var i = 0; i < numParticles; i++) {\r\n      //Spread the particles over the projectile\r\n      var dx = x + Math.randomBetween(-this.radius, this.radius);\r\n      var dy = y + Math.randomBetween(-this.radius, this.radius);\r\n      this.particles.push(new Particle(dx, dy, Math.PI * this.velocity.dir, 1.0, this.color, 10));\r\n    }\r\n  }\r\n\r\n  /** @function initSpeed()\r\n    * function to handle speed initialization\r\n    */\r\n  initSpeed() {\r\n    this.speed.x = Math.sin(this.velocity.dir) * this.velocity.mag;\r\n    this.speed.y = -Math.cos(this.velocity.dir) * this.velocity.mag;\r\n  }\r\n\r\n  /** @function edgeDetection()\r\n    * function to handle edgeDetection of projectiles, projectiles are destroyed at the edge\r\n    */\r\n  edgeDetection() {\r\n    if(this.x + this.radius >= 1000 || this.x - this.radius <= 0 ||\r\n    this.y + this.radius >= 1000|| this.y - this.radius <= 0) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /** @function update()\r\n    * typical update function, also updates its particle trail\r\n    */\r\n  update(targets) {\r\n    this.createParticles(Math.randomInt(3, 6));\r\n    this.x += this.speed.x;\r\n    this.y += this.speed.y;\r\n    //Particle effect for the trail\r\n    for(var j = 0; j < this.particles.length; j++) {\r\n      this.particles[j].update();\r\n      if(this.particles[j].life <= 0) {\r\n        this.particles.splice(j, 1);\r\n      }\r\n    }\r\n  }\r\n\r\n  /** @function render()\r\n    * standard render function\r\n    * @param context ctx - backBufferContext from game.js\r\n    */\r\n  render(ctx) {\r\n    ctx.save();\r\n    ctx.strokeStyle = this.color;\r\n    ctx.beginPath();\r\n    ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);\r\n    ctx.closePath();\r\n    ctx.stroke();\r\n    ctx.restore();\r\n    this.particles.forEach(particle => {\r\n      particle.render(ctx);\r\n    });\r\n  }\r\n}\r\n","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nexport default function _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import getPrototypeOf from \"./getPrototypeOf\";\nimport superPropBase from \"./superPropBase\";\nexport default function _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}","import getPrototypeOf from \"./getPrototypeOf\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import Projectile from \"./projectile.js\"\r\n\r\n\r\nexport default class Homing extends Projectile {\r\n  constructor(x, y, direction, color) {\r\n    super(x, y, direction, color);\r\n    // 0.0174533 is 1 degree in radians\r\n    this.correction = 0.0174533 * 1.5;\r\n    this.target = null;\r\n  }\r\n\r\n  findTarget(targets) {\r\n    let shortest = 10000\r\n    for(let i = 0; i < targets.length; i++) {\r\n      let distance = 0;\r\n      if(this.target !== targets[i]) {\r\n        distance = this.findDistance(targets[i]);\r\n      }\r\n      if(distance < shortest) {\r\n        this.target = targets[i]\r\n        shortest = distance\r\n      }\r\n    }\r\n    if(shortest === 10000) {\r\n      this.target = null\r\n    }\r\n  }\r\n\r\n  findDistance(target) {\r\n    let dx = this.x - target.x\r\n    let dy = this.y - target.y\r\n    let distance = Math.sqrt(dx * dx + dy * dy)\r\n    return distance\r\n  }\r\n\r\n  findDirection(target) {\r\n    let dx = this.x - target.x\r\n    let dy = this.y - target.y\r\n    let distance = Math.sqrt(dx * dx + dy * dy)\r\n    let direction = Math.acos(dy / distance)\r\n    if(dx > 0) {\r\n      direction *= -1\r\n    }\r\n    if( direction < 0) {\r\n      direction += Math.PI * 2\r\n    }\r\n    return direction;\r\n  }\r\n\r\n  adjustDirection() {\r\n    let direction = this.findDirection(this.target);\r\n    if(this.velocity.dir < 0) {\r\n      this.velocity.dir += Math.PI * 2\r\n    }\r\n    let delta = this.velocity.dir - direction\r\n    if(delta > Math.PI) {\r\n      delta -= Math.PI * 2\r\n    }\r\n    if(delta < -Math.PI) {\r\n      delta += Math.PI * 2\r\n    }\r\n    if(delta > 0) {\r\n      this.velocity.dir -= this.correction;\r\n    }\r\n    if(delta < 0) {\r\n      this.velocity.dir += this.correction;\r\n    }\r\n  }\r\n\r\n  update(targets) {\r\n    if(this.color === 'green') {\r\n      if(targets.length > 0) {\r\n        this.findTarget(targets);\r\n      }\r\n    }\r\n    else {\r\n      this.target = targets;\r\n    }\r\n    if(this.target) {\r\n      this.adjustDirection();\r\n      super.initSpeed();\r\n    }\r\n    super.update(targets)\r\n  }\r\n}\r\n","import Ship from './ship.js';\r\nimport Particle from './particles.js';\r\n\r\n/** @class UFO\r\n  * Class to handle the UFO, inherits from the Ship class\r\n  */\r\nexport default class UFO extends Ship {\r\n  /** @constructor\r\n    * Handles the initialization of the UFO\r\n    */\r\n  constructor(x, y) {\r\n    super();\r\n    this.x = x;\r\n    this.y = y;\r\n    this.rotation = 0.0;\r\n    this.accel = {mag: 0.0, dir: 0.0}\r\n    this.acceleration = 0.2;\r\n    this.asteroid = '';\r\n    //For visual\r\n    this.innerRadius = 10;\r\n    //For the actual size of the ship\r\n    this.radius = 25;\r\n    //For the area around the ship the UFO tries to keep empty\r\n    this.bufferRadius = 60;\r\n    //When the Ship is on the verge of crashing into an asteroid, it shoots to destory it\r\n    this.critical = 40;\r\n    this.color = \"\";\r\n    this.bounty = 0;\r\n    this.setColor();\r\n    this.rateOfFire = 0;\r\n    this.setRateOfFire();\r\n    //For visual\r\n    this.lineSegments = [];\r\n    this.initLineSegments();\r\n    this.goal = '';\r\n    this.initVelocity();\r\n    //1 second, delay on when to start seeking out the goal again\r\n    this.clock = 60;\r\n  }\r\n\r\n  setColor() {\r\n    var color;\r\n    var random = Math.randomInt(0, 101);\r\n    //Spawn UFO and reset Timer\r\n    if(random > 80) {\r\n      color = 'purple';\r\n      this.bounty = 200;\r\n    }\r\n    else if (random > 50) {\r\n      color = 'blue';\r\n      this.bounty = 150;\r\n    }\r\n    else {\r\n      color = 'orange';\r\n      this.bounty = 100;\r\n    }\r\n    this.color = color;\r\n  }\r\n\r\n  setRateOfFire() {\r\n    if(this.color === 'purple') {\r\n      this.rateOfFire = Math.randomInt(150, 350);\r\n    }\r\n    else if(this.color === 'blue') {\r\n      this.rateOfFire = Math.randomInt(300, 700);\r\n    }\r\n    else {\r\n      this.rateOfFire = Math.randomInt(300, 500);\r\n    }\r\n    if(this.powerups[2]) {\r\n      this.rateOfFire = Math.round(this.rateOfFire / 2)\r\n    }\r\n  }\r\n\r\n  /** @function initLineSegments()\r\n    * handles the creation of endpoints to draw lines on the UFO\r\n    */\r\n  initLineSegments() {\r\n    var xi;\r\n    var xf;\r\n    var yi;\r\n    var yf;\r\n    // 60 degress per segment, (PI / 3)\r\n    var numSegments = 6;\r\n    for(var i = 0; i < numSegments; i++) {\r\n      //Calculate various sin and cos values\r\n      var cos = Math.cos(i * Math.PI / 3);\r\n      var sin = Math.sin(i * Math.PI / 3);\r\n      //Set x values based on cos * radius values\r\n      xi = cos * this.innerRadius;\r\n      xf = cos * this.radius;\r\n      //Set y values based on - sin * radius values\r\n      yi = -sin * this.innerRadius;\r\n      yf = -sin * this.radius;\r\n      this.lineSegments.push({xI: xi, xF: xf, yI: yi, yF: yf});\r\n    }\r\n  }\r\n\r\n  /** @function initVelocity()\r\n    * Handles the initVelocity of the UFO\r\n    */\r\n  initVelocity() {\r\n    this.goal = {x: Math.randomBetween(200, 800), y: Math.randomBetween(200, 800)};\r\n  }\r\n\r\n  updateSpeed() {\r\n    //Alter the direction\r\n    this.speed.y += -Math.cos(this.accel.dir) * this.accel.mag;\r\n    this.speed.x += Math.sin(this.accel.dir) * this.accel.mag;\r\n    //Enforce the max x speed\r\n    if(Math.abs(this.speed.x) >= 1.5) {\r\n      if(this.speed.x < 0) {\r\n        this.speed.x = -1.5;\r\n      }\r\n      else {\r\n        this.speed.x = 1.5;\r\n      }\r\n    }\r\n    //Enfore the max y speed\r\n    if(Math.abs(this.speed.y) >= 1.5) {\r\n      if(this.speed.y < 0) {\r\n        this.speed.y = -1.5;\r\n      }\r\n      else {\r\n        this.speed.y = 1.5;\r\n      }\r\n    }\r\n  }\r\n\r\n  /** @function edgeDetection()\r\n    * function to handle the asteroid leaving the edge of the screen,  slightly different than player ship since it is okay for it to be off screen\r\n    * Side note - UFO is much more vulnerable to asteroids off screen, cannot shoot to protect itself (though it will try) and asteroids switching sides may instantly destory it\r\n    */\r\n  edgeDetection() {\r\n    if((this.x + this.bufferRadius >= 1000 && this.speed.x > 0) || (this.x - this.bufferRadius <= 0 && this.speed.x < 0)) {\r\n      this.speed.x *= -1\r\n      this.accel.dir += Math.PI / 2\r\n      this.accel.mag = 0.0\r\n    }\r\n    if((this.y + this.bufferRadius >= 1000 && this.speed.y > 0) || (this.y - this.bufferRadius <= 0 && this.speed.y < 0)) {\r\n      this.speed.y *= -1\r\n      this.accel.dir += Math.PI / 2\r\n      this.accel.mag = 0.0\r\n    }\r\n  }\r\n\r\n  checkCollisions(asteroids, x, y) {\r\n    for(let j = 0; j < asteroids.length; j++) {\r\n      if(Math.circleCollisionDetection(x, y, this.critical, asteroids[j].x, asteroids[j].y, asteroids[j].radius)) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  goToGoal() {\r\n    this.accel.dir = Math.getDirection(this.x, this.y, this.goal.x, this.goal.y);\r\n    this.accel.mag = this.acceleration;\r\n    let distance = Math.getDistance(this.x, this.y, this.goal.x, this.goal.y);\r\n    if(distance < this.radius) {\r\n      this.goal = '';\r\n    }\r\n  }\r\n\r\n  alterPath(direction) {\r\n    this.accel.mag = this.acceleration;\r\n    this.accel.dir = direction;\r\n    if(this.goal !== '' && this.color === 'orange') {\r\n      //This is so it doesn't get pushed to zero by dodging a lot\r\n      this.clock = 60;\r\n      this.clock--;\r\n    }\r\n  }\r\n\r\n  catchAsteroid(asteroid) {\r\n    this.asteroid = asteroid\r\n    this.asteroid.velocity.x = this.speed.x;\r\n    this.asteroid.velocity.y = this.speed.y;\r\n  }\r\n\r\n  orbitAsteroid() {\r\n    let direction = Math.getDirection(this.x, this.y, this.asteroid.x, this.asteroid.y);\r\n    let distance = Math.getDistance(this.x, this.y, this.asteroid.x, this.asteroid.y)\r\n    let delta = 0.02;\r\n    let x = this.x + Math.sin(direction + delta) * distance;\r\n    let y = this.y - Math.cos(direction + delta) * distance;\r\n    this.asteroid.x = x;\r\n    this.asteroid.y = y;\r\n  }\r\n\r\n  checkAsteroidAlignment(player) {\r\n    let direction = Math.getDirection(this.x, this.y, this.asteroid.x, this.asteroid.y);\r\n    let aim = Math.getDirection(this.x, this.y, player.x, player.y);\r\n    let error = direction - aim;\r\n    //If it is only off my 5 degrees\r\n    if(Math.abs(error) < 5 * Math.PI / 180) {\r\n      let magnitude = 30 / this.asteroid.mass;\r\n      this.speed.y += -Math.cos(this.accel.dir) * this.accel.mag;\r\n      this.speed.x += Math.sin(this.accel.dir) * this.accel.mag;\r\n      this.asteroid.velocity.x = Math.sin(direction) * magnitude;\r\n      this.asteroid.velocity.y = -Math.cos(direction) * magnitude\r\n      this.asteroid = '';\r\n    }\r\n  }\r\n\r\n  /** @function createParticles()\r\n    * function to handle creating the particles for the thruster trail\r\n    * @param int numParticles - number of particles to be created\r\n    */\r\n  createParticles(numParticles) {\r\n    for(var i = 0; i < numParticles; i++) {\r\n      var angle = this.velocityDirection + Math.randomBetween(-Math.PI, 0);\r\n      var x = this.x - Math.cos(angle) * this.radius;\r\n      var y = this.y + Math.sin(angle) * this.radius;\r\n      //Create new Particle\r\n      this.particles.push(new Particle(x, y, Math.PI + this.velocityDirection, 0.5, this.color, 30));\r\n    }\r\n  }\r\n\r\n  /** @function update()\r\n    * standard position / speed update function\r\n    */\r\n  update() {\r\n    this.edgeDetection();\r\n    this.updateSpeed();\r\n    super.checkPowerUps();\r\n    super.updateDirection();\r\n    if(this.clock < 60) {\r\n      this.clock--;\r\n      if(this.clock <= 0) {\r\n        this.clock = 60;\r\n      }\r\n    }\r\n    if(this.clock === 60 && this.goal !== '') {\r\n      this.goToGoal();\r\n    }\r\n    //Controlling the rate of fire\r\n    if(this.reloading) {\r\n      this.rateOfFire--;\r\n      if(this.rateOfFire <= 0) {\r\n        this.setRateOfFire()\r\n        this.reloading = false;\r\n      }\r\n    }\r\n    if(this.speed.x > 0) {\r\n      this.rotation += 0.01;\r\n    }\r\n    else {\r\n      this.rotation -= 0.01;\r\n    }\r\n    if(this.asteroid !== '') {\r\n      if(this.asteroid.destroyed) {\r\n        this.asteroid = '';\r\n      }\r\n      else {\r\n        this.asteroid.velocity.x = this.speed.x;\r\n        this.asteroid.velocity.y = this.speed.y;\r\n        this.orbitAsteroid();\r\n      }\r\n    }\r\n    this.x += this.speed.x;\r\n    this.y += this.speed.y;\r\n    this.createParticles(1)\r\n    //Particle effect for the thruster\r\n    for(var j = 0; j < this.particles.length; j++) {\r\n      this.particles[j].update();\r\n      if(this.particles[j].life <= 0) {\r\n        this.particles.splice(j, 1);\r\n      }\r\n    }\r\n  }\r\n\r\n /** @function render()\r\n  * standard render function\r\n  */\r\n  render(ctx) {\r\n    ctx.save();\r\n    ctx.strokeStyle = this.color;\r\n    ctx.translate(this.x, this.y);\r\n    ctx.rotate(this.rotation);\r\n    ctx.beginPath();\r\n    ctx.arc(0, 0, this.innerRadius, 0, Math.PI * 2);\r\n    ctx.closePath();\r\n    ctx.stroke();\r\n    ctx.beginPath();\r\n    ctx.arc(0, 0, this.radius, 0, Math.PI * 2);\r\n    ctx.closePath();\r\n    ctx.stroke();\r\n    this.lineSegments.forEach(segment => {\r\n      ctx.beginPath();\r\n      ctx.moveTo(segment.xI, segment.yI);\r\n      ctx.lineTo(segment.xF, segment.yF);\r\n      ctx.stroke();\r\n    });\r\n    ctx.restore();\r\n    //Render particles\r\n    this.particles.forEach(particle => {\r\n      particle.render(ctx);\r\n    });\r\n    if(this.powerups[3]) {\r\n      super.drawShield(ctx);\r\n    }\r\n  }\r\n}\r\n","\r\n\r\nexport default class PowerUp {\r\n\tconstructor(x, y, type) {\r\n\t\tthis.pos = {x: x, y: y};\r\n\t\tthis.type = type\r\n\t\tthis.radius = 10;\r\n\t\tthis.color = 'red';\r\n\t\tthis.timer = 0;\r\n\t\tthis.lineSegments = []\r\n\t\tthis.initTimer()\r\n\t\tthis.initShape()\r\n\t}\r\n\r\n\tinitTimer() {\r\n\t\tswitch (this.type){\r\n\t\t\t\t//Homing\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\t//15 seconds at 60 fps\r\n\t\t\t\t\tthis.timer = 900;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t//Rapid Fire\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\t//20 seconds at 60 fps\r\n\t\t\t\t\tthis.timer = 1200;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t//Shield\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\t//60 seconds at 60 fps\r\n\t\t\t\t\tthis.timer = 3600;\r\n\t\t\t\t\tthis.color = 'magenta';\r\n\t\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t}\r\n\t}\r\n\r\n\tinitShape() {\r\n\t\tswitch (this.type) {\r\n\t\t\tcase 1:\r\n\t\t\t\tthis.initLineSegments()\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tinitLineSegments() {\r\n\t\tvar xi;\r\n\t\tvar xf;\r\n\t\tvar yi;\r\n\t\tvar yf;\r\n\t\tvar numSegments = 2;\r\n\t\tfor(var i = 0; i < numSegments; i++) {\r\n\t\t\t//Calculate various sin and cos values\r\n\t\t\tvar cos = Math.cos(i * Math.PI / 2);\r\n\t\t\tvar sin = Math.sin(i * Math.PI / 2);\r\n\t\t\t//Set x values based on cos * radius values\r\n\t\t\txi = cos * this.radius;\r\n\t\t\txf = -cos * this.radius;\r\n\t\t\t//Set y values based on - sin * radius values\r\n\t\t\tyi = -sin * this.radius;\r\n\t\t\tyf = sin * this.radius;\r\n\t\t\tthis.lineSegments.push({xI: xi, xF: xf, yI: yi, yF: yf});\r\n\t\t}\r\n\t}\r\n\r\n/** @function render()\r\n * standard render function\r\n */\r\n render(ctx) {\r\n   ctx.save();\r\n   ctx.strokeStyle = this.color;\r\n   ctx.translate(this.pos.x, this.pos.y);\r\n   ctx.beginPath();\r\n   ctx.arc(0, 0, this.radius, 0, Math.PI * 2);\r\n   ctx.closePath();\r\n   ctx.stroke();\r\n\t ctx.beginPath();\r\n\t ctx.rect(-this.radius * 1.30, -this.radius * 1.30, this.radius * 2.60, this.radius * 2.60)\r\n\t ctx.closePath();\r\n\t ctx.stroke();\r\n   this.lineSegments.forEach(segment => {\r\n     ctx.beginPath();\r\n     ctx.moveTo(segment.xI, segment.yI);\r\n     ctx.lineTo(segment.xF, segment.yF);\r\n     ctx.stroke();\r\n   });\r\n   ctx.restore();\r\n }\r\n}\r\n","\r\n\r\nexport default class AudioController {\r\n  constructor() {\r\n    //Found this Wav file @ https://freesound.org/people/joshuaempyre/sounds/251461/\r\n    /*this.theme = new Audio('./theme.wav');\r\n    this.theme.volume = 0.01;\r\n    this.theme.loop = true;\r\n    this.theme.play();*/\r\n    //All Wav files below were created with BFXR\r\n    //Array of sounds for simplifing manipulating the sounds in mass\r\n    this.sounds = [];\r\n    this.over = new Audio('./gameOver.wav');\r\n    this.sounds.push(this.over);\r\n    this.collisionSound = new Audio('collision.wav');\r\n    this.collisionSound.volume = 0.50;\r\n    this.sounds.push(this.collisionSound);\r\n    this.explosion = new Audio('./Explosion.wav');\r\n    this.explosion.volume = 0.70;\r\n    this.sounds.push(this.explosion);\r\n    this.shipExplosion = new Audio('./shipExplosion.wav');\r\n    this.sounds.push(this.shipExplosion);\r\n    //this.laser = new Audio('./laserShoot.wav');\r\n    this.ufoLaser = new Audio('./ufoShot.wav');\r\n    this.sounds.push(this.ufoLaser);\r\n    this.teleportSound = new Audio('./teleport.wav');\r\n    this.sounds.push(this.teleportSound);\r\n  }\r\n\r\n  adjustMasterVolume(change) {\r\n    this.sounds.forEach(sound => {\r\n      sound.volume += change;\r\n      if(sound.volume < 0.0) {\r\n        sound.volume = 0.0;\r\n      }\r\n      if(sound.volume > 1.0) {\r\n        sound.volume = 1.0;\r\n      }\r\n    });\r\n  }\r\n\r\n  mute() {\r\n    this.sounds.forEach(sound => {\r\n      sound.muted = true;\r\n    });\r\n  }\r\n\r\n  unmute() {\r\n    this.sounds.forEach(sound => {\r\n      sound.muted = false;\r\n    });\r\n  }\r\n\r\n  trigger(sound) {\r\n    switch (sound) {\r\n      case 'shoot':\r\n        this.ufoLaser.play();\r\n        break;\r\n      case 'collision':\r\n        this.collisionSound.play();\r\n        break;\r\n      case 'explosion':\r\n        this.explosion.play();\r\n        break;\r\n      case 'ship explosion':\r\n        this.shipExplosion.play();\r\n        break;\r\n      case 'teleport':\r\n        this.teleportSound.play();\r\n        break;\r\n      case 'game over':\r\n        this.over.play();\r\n        break;\r\n      default:\r\n\r\n    }\r\n  }\r\n}\r\n","\r\nimport Ship from './ship.js';\r\nimport Asteroid from './asteroid.js';\r\nimport Projectile from './projectile.js';\r\nimport Homing from './homing.js';\r\nimport Particle from './particles.js';\r\nimport UFO from './ufo.js';\r\nimport PowerUp from './powerup.js';\r\nimport './math.js';\r\nimport AudioController from './audiocontroller.js';\r\n\r\n/** @class Game\r\n  * Game object that controls the interactions between all other Objects\r\n  */\r\nexport default class Game {\r\n  /** @constructor\r\n    * Game object constructor, no arguement, sets up all the necessities.\r\n    */\r\n  constructor() {\r\n    this.screenSide = 1000;\r\n    //Absolutes\r\n    this.MAXUFO = 5;\r\n    this.MAXASTEROIDS = 15;\r\n    this.UFOTIME = 500;\r\n    this.POWERTIME = 900;\r\n    //Num Objects\r\n    this.numAsteroids = 5;\r\n    //Objects/Arrays\r\n    this.ship = new Ship();\r\n    this.ufos = [];\r\n    this.kills = 0;\r\n    //Variables to control ufo spawn\r\n    this.ufoTimer = Math.randomInt(this.UFOTIME, this.UFOTIME * 2);\r\n    //var To control ufo firing\r\n    //this.ufoRateOfFire = Math.randomInt(150, 350);\r\n    //Vars to help with respawning the player\r\n    this.respawning = false;\r\n    this.respawnTimer = 300;\r\n    this.projectiles = [];\r\n    this.asteroids = [];\r\n    this.createAsteroids();\r\n    this.particles = [];\r\n    //HUD Variables\r\n    this.score = 0;\r\n    this.highscore = 0;\r\n    this.lives = 3;\r\n    this.level = 1;\r\n    //Make sure there are never fewer than the inital amount of asteroids\r\n    this.constAsteroids = this.level * this.numAsteroids;\r\n    //controls the teleport function\r\n    this.teleports = 10;\r\n    this.coolingDown = 50;\r\n    this.powerups = [];\r\n    this.powerupTimer = Math.randomInt(this.POWERTIME, this.POWERTIME * 3);\r\n    //Over Loop Controllers\r\n    this.gameOver = false;;\r\n    this.paused = false;\r\n\r\n    this.audioController = new AudioController();\r\n\r\n    //Input Map\r\n    this.keyMap = {13: false, 32: false, 37: false, 38: false, 39: false, 65: false, 68: false, 70: false, 87: false, 88: false};\r\n\r\n    //HUD\r\n    this.HUDcanvas = document.getElementById('ui');\r\n    this.HUDcanvas.width = this.screenSide;\r\n    this.HUDcanvas.height = 100;\r\n    this.HUDcontext = this.HUDcanvas.getContext('2d');\r\n    document.body.appendChild(this.HUDcanvas);\r\n\r\n    //Back Buffer\r\n    this.backBufferCanvas = document.getElementById(\"canvas\");\r\n    this.backBufferCanvas.width = this.screenSide;\r\n    this.backBufferCanvas.height = this.screenSide;\r\n    this.backBufferContext = this.backBufferCanvas.getContext('2d');\r\n\r\n    //Canvas that actually gets put on the screen\r\n    this.screenBufferCanvas = document.getElementById(\"canvas\");\r\n    this.screenBufferCanvas.width = this.screenSide;\r\n    this.screenBufferCanvas.height = this.screenSide;\r\n    document.body.appendChild(this.screenBufferCanvas);\r\n    this.screenBufferContext = this.screenBufferCanvas.getContext('2d');\r\n\r\n    //Binders\r\n    this.loop = this.loop.bind(this);\r\n    this.handleKeyDown = this.handleKeyDown.bind(this);\r\n    this.handleKeyUp = this.handleKeyUp.bind(this);\r\n    window.onkeydown = this.handleKeyDown;\r\n    window.onkeyup = this.handleKeyUp;\r\n\r\n    //60 fps\r\n    this.interval = setInterval(this.loop, 50/3);\r\n  }\r\n\r\n  /** @function masterReset()\r\n    * This function handles the reset of eve except for the highscore, ~ to activate\r\n    */\r\n  masterReset() {\r\n    //Objects/Arrays\r\n    this.ship = new Ship();\r\n    this.ufos = [];\r\n    //Variables to control ufo spawn\r\n    this.ufoTimer = Math.randomInt(this.UFOTIME, this.UFOTIME * 2);\r\n    this.powerups = [];\r\n    this.powerupTimer = Math.randomInt(this.POWERTIME, this.POWERTIME * 3);\r\n    //var To control ufo firing\r\n    //this.ufoRateOfFire = Math.randomInt(150, 350);\r\n    //Vars to help with respawning the player\r\n    this.respawning = false;\r\n    this.respawnTimer = 300;\r\n    this.projectiles = [];\r\n    this.asteroids = [];\r\n    this.numAsteroids = 5;\r\n    this.createAsteroids();\r\n    this.particles = [];\r\n    //HUD Variables\r\n    this.score = 0;\r\n    this.lives = 3;\r\n    this.level = 1;\r\n    //controls the telepor function\r\n    this.teleports = 10;\r\n    this.coolingDown = 50;\r\n    //Over Loop Controllers\r\n    this.gameOver = false;\r\n    this.paused = false;\r\n    /*this.theme.loop = true;\r\n    this.theme.play();*/\r\n  }\r\n\r\n  /** @function handleKeyDown()\r\n    * function to handle key presses\r\n    */\r\n  handleKeyDown(event) {\r\n    event.preventDefault();\r\n    //Update the keyMap\r\n    this.keyMap[event.keyCode] = true;\r\n    //Handle the Pause seperately, to control the loop function\r\n    if(event.keyCode === 80) {\r\n      if(this.paused) {\r\n        this.paused = false;\r\n      }\r\n      else {\r\n        this.paused = true;\r\n      }\r\n    }\r\n    if(event.keyCode === 192) {\r\n      this.masterReset();\r\n    }\r\n  }\r\n\r\n  /** @function\r\n    * function to handle the keys being lifted up\r\n    */\r\n  handleKeyUp(event) {\r\n    event.preventDefault();\r\n    //Update the key map\r\n    this.keyMap[event.keyCode] = false;\r\n  }\r\n\r\n  /** @function\r\n    * function to create a Projectile from the player's ship\r\n    */\r\n  createProjectile() {\r\n    //Get the coordinates of the tip of the ship, The 1.2 is so you can't run into your own shot immediately\r\n    var x = this.ship.x + Math.sin(this.ship.accel.dir)* this.ship.radius * 1.2;\r\n    var y = this.ship.y - Math.cos(this.ship.accel.dir)* this.ship.radius * 1.2;\r\n    if(this.ship.powerups[1]) {\r\n      this.projectiles.push(new Homing(x, y, this.ship.accel.dir, this.ship.color));\r\n    }\r\n    else {\r\n      this.projectiles.push(new Projectile(x, y, this.ship.accel.dir, this.ship.color));\r\n    }\r\n    this.ship.reloading = true;\r\n  }\r\n\r\n  /** @function\r\n    * function to handle UFO projectiles\r\n    * @param float tx - is the x position of the target\r\n    * @param float ty - is the y position of the target\r\n    */\r\n  ufoProjectile(ufo, tx, ty) {\r\n    var dx = ufo.x - tx;\r\n    var dy = ufo.y - ty;\r\n    //Draw a line to the target\r\n    var distance = Math.sqrt(dx * dx + dy * dy);\r\n    //Get the direction to the target\r\n    var direction = Math.acos(dy / distance);\r\n    //Mirror the angle for the left hand side\r\n    if(dx > 0) {\r\n      direction *= -1;\r\n    }\r\n    //Again, 1.2 is so the ufo doesn't immediately destory itself when it shoots\r\n    var x = ufo.x + Math.sin(direction)* ufo.radius * 1.2;\r\n    var y = ufo.y - Math.cos(direction)* ufo.radius * 1.2;\r\n    if(ufo.powerups[1]) {\r\n      this.projectiles.push(new Homing(x, y, direction, ufo.color));\r\n    }\r\n    else {\r\n      this.projectiles.push(new Projectile(x, y, direction, ufo.color));\r\n    }\r\n    this.audioController.trigger('shoot');\r\n    ufo.reloading = true;\r\n  }\r\n\r\n  /** @function\r\n    * function to create as many asteroids as needed\r\n    */\r\n  createAsteroids() {\r\n    while(this.asteroids.length < this.numAsteroids) {\r\n      this.addAsteroid(-1.0);\r\n    }\r\n  }\r\n\r\n  /** @function addAsteroid()\r\n    * Function to add new asteroid to the list while making sure it is not spawned where a object already is\r\n    * @param float direction - determines the inital direction of the asteroid if it has exploded, -1.0 if spawning in otherwise\r\n    */\r\n  addAsteroid(direction) {\r\n    //Variables to establish the particle\r\n    var x;\r\n    var y;\r\n    var radius;\r\n    var mass;\r\n    //Var to control the while loop\r\n    var currLength = this.asteroids.length;\r\n    //Loop that generates random values for the particle and makes sure the space is not already occupied\r\n    while (currLength === this.asteroids.length) {\r\n      //Var to determine if it would have spawned inside something\r\n      var collision = false;\r\n      var spawnSide = Math.randomInt(1, 5);\r\n      mass = Math.randomBetween(10, 75);\r\n      radius = mass;\r\n      //Top\r\n      if(spawnSide === 1) {\r\n        x = Math.randomBetween(-2 * radius, this.screenSide + 2 * radius);\r\n        y = - 2 * radius;\r\n      }\r\n      //Right\r\n      else if(spawnSide === 2) {\r\n        x = this.screenSide + 2 * radius;\r\n        y = Math.randomBetween(-2 * radius, this.screenSide + 2 * radius);\r\n      }\r\n      //Bottom\r\n      else if(spawnSide === 3) {\r\n        x = Math.randomBetween(-2 * radius, this.screenSide + 2 * radius);\r\n        y = this.screenSide + 2 * radius;\r\n      }\r\n      //Left\r\n      else {\r\n        x = - 2 * radius;\r\n        y = Math.randomBetween(-2 * radius, this.screenSide + 2 * radius);\r\n      }\r\n      //Checks if the position is occupied by another asteroid\r\n      this.asteroids.forEach(asteroid => {\r\n        if(Math.circleCollisionDetection(asteroid.x, asteroid.y, asteroid.radius, x, y, radius)) {\r\n          collision = true;\r\n        }\r\n      });\r\n      if(!collision) {\r\n        this.asteroids.push(new Asteroid(x, y, mass, direction));\r\n      }\r\n    }\r\n  }\r\n\r\n  addUFO() {\r\n    var x;\r\n    var y;\r\n    var radius = 25;\r\n    var currLength = this.ufos.length;\r\n\r\n    while(currLength === this.ufos.length) {\r\n      var collision = false;\r\n      var spawnSide = Math.randomInt(1, 5);\r\n      //Top\r\n      if(spawnSide === 1) {\r\n        x = Math.randomBetween(-2 * radius, 1000 + 2 * radius);\r\n        y = - 2 * radius;\r\n      }\r\n      //Right\r\n      else if(spawnSide === 2) {\r\n        x = 1000 + 2 * radius;\r\n        y = Math.randomBetween(-2 * radius, 1000 + 2 * radius);\r\n      }\r\n      //Bottom\r\n      else if(spawnSide === 3) {\r\n        x = Math.randomBetween(-2 * radius, 1000 + 2 * radius);\r\n        y = 1000 + 2 * radius;\r\n      }\r\n      //Left\r\n      else {\r\n        x = - 2 * radius;\r\n        y = Math.randomBetween(-2 * radius, 1000 + 2 * radius);\r\n      }\r\n      this.asteroids.forEach(asteroid => {\r\n        if(Math.circleCollisionDetection(x, y, radius + 40, asteroid.x, asteroid.y, asteroid.radius)) {\r\n          collision = true;\r\n        }\r\n      });\r\n      if(!collision) {\r\n        this.ufos.push(new UFO(x, y));\r\n      }\r\n    }\r\n  }\r\n\r\n  createPowerUp() {\r\n    let x = Math.randomInt(this.screenSide * 0.10, this.screenSide * 0.90)\r\n    let y = Math.randomInt(this.screenSide * 0.10, this.screenSide * 0.90)\r\n    let random = Math.random();\r\n    if(random > 0.66) {\r\n      this.powerups.push(new PowerUp(x, y, 1));\r\n    }\r\n    else if (random > 0.33) {\r\n      this.powerups.push(new PowerUp(x, y, 2));\r\n    }\r\n    else {\r\n      this.powerups.push(new PowerUp(x, y, 3));\r\n    }\r\n  }\r\n\r\n  /** @function rotate()\r\n    * Function to change the velocities to make the collisions act like 1-dimensional collisions\r\n    * @param velocity is the x and y velocities of the asteroid\r\n    * @param float angle is the offset needed to adjust for\r\n    * @returns vector of rotated velocities\r\n    */\r\n  rotate(velocity, angle) {\r\n    const rotatedVelocities = {\r\n        x: velocity.x * Math.cos(angle) - velocity.y * Math.sin(angle),\r\n        y: velocity.x * Math.sin(angle) + velocity.y * Math.cos(angle)\r\n    };\r\n    return rotatedVelocities;\r\n  }\r\n\r\n  /** @function particleCollision()\r\n    * Function to handle asteroid to asteroid collisions (treated like elastic particle collisions), I ripped this out of one my side projects\r\n    * @param asteroid is the first asteroid in question\r\n    * @param asteroid otherAsteroid is the other particle in question\r\n    */\r\n  particleCollision(asteroid, otherAsteroid) {\r\n    //Vars to determine the differences in velocities\r\n    var xVelocityDiff = asteroid.velocity.x - otherAsteroid.velocity.x;\r\n    var yVelocityDiff = asteroid.velocity.y - otherAsteroid.velocity.y;\r\n    //Vars to determine the distances between particles\r\n    var xDist = otherAsteroid.x - asteroid.x;\r\n    var yDist = otherAsteroid.y - asteroid.y;\r\n\r\n    // Prevent accidental overlap of particles\r\n    if (xVelocityDiff * xDist + yVelocityDiff * yDist >= 0) {\r\n\r\n        // Grab angle between the two colliding asteroids\r\n        var angle = -Math.atan2(otherAsteroid.y - asteroid.y, otherAsteroid.x - asteroid.x);\r\n\r\n        // Store mass in var for better readability in collision equation\r\n        var m1 = asteroid.mass;\r\n        var m2 = otherAsteroid.mass;\r\n\r\n        // Velocity before equation\r\n        var u1 = this.rotate(asteroid.velocity, angle);\r\n        var u2 = this.rotate(otherAsteroid.velocity, angle);\r\n\r\n        // Velocity after 1d collision equation\r\n        var v1 = { x: (u1.x * (m1 - m2) + 2 * m2 * u2.x) / (m1 + m2), y: u1.y };\r\n        var v2 = { x: (u2.x * (m2 - m1) + 2 * m1 * u1.x)/ (m1 + m2), y: u2.y };\r\n\r\n        // Final velocity after rotating axis back to original location\r\n        var vFinal1 = this.rotate(v1, -angle);\r\n        var vFinal2 = this.rotate(v2, -angle);\r\n\r\n        // Swap particle velocities for realistic bounce effect\r\n        asteroid.velocity.x = vFinal1.x;\r\n        asteroid.velocity.y = vFinal1.y;\r\n        otherAsteroid.velocity.x = vFinal2.x;\r\n        otherAsteroid.velocity.y = vFinal2.y;\r\n    }\r\n  }\r\n\r\n  projectileDodger(ufo, projectile) {\r\n    var distance = Math.getDistance(ufo.x, ufo.y, projectile.x, projectile.y);\r\n    if(distance < (ufo.bufferRadius * 2 + projectile.radius)) {\r\n      var direction = Math.getDirection(projectile.x, projectile.y, ufo.x, ufo.y);\r\n      ufo.alterPath(direction);\r\n      ufo.clock = 60;\r\n      ufo.clock--;\r\n    }\r\n    if(distance < (ufo.radius + projectile.radius)) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /** @function handleAsteriodExplosion()\r\n    * function to handles asteroids exploding from a projectile\r\n    * @param int aID - index of the asteroid to be exploded\r\n    */\r\n  handleAsteriodExplosion(aID) {\r\n    //Save the essentials\r\n    var asteroid = this.asteroids[aID];\r\n    var mass = asteroid.mass;\r\n    var x = asteroid.x;\r\n    var y = asteroid.y;\r\n    //Get rid of the asteroid\r\n    asteroid.destroyed = true;\r\n    this.asteroids.splice(aID, 1);\r\n    this.audioController.trigger('explosion');\r\n    //Smaller asteroids are harder to hit, thus more score\r\n    this.score += Math.floor(100 / mass);\r\n    //If it isn't too small\r\n    if(mass >= 15) {\r\n      //random number of pieces the asteroid will break into\r\n      var random = Math.randomInt(2, 4);\r\n      //Update asteroid count\r\n      this.numAsteroids += random - 1;\r\n      mass /= random;\r\n      //Random direction\r\n      var direction = Math.randomBetween(0, 2 * Math.PI);\r\n      //Uniform distribution\r\n      var angleChange = 2 * Math.PI / random;\r\n      for(var i = 0; i < random; i++) {\r\n        //Since mass is also the radius\r\n        var newX = x + Math.cos(direction) * mass;\r\n        var newY = y - Math.sin(direction) * mass;\r\n        //Create new asteroid\r\n        this.asteroids.push(new Asteroid(newX, newY, mass, direction));\r\n        direction += angleChange;\r\n      }\r\n    }\r\n    else {\r\n      this.numAsteroids--;\r\n    }\r\n  }\r\n\r\n  /** @function detectShipCrash()\r\n    * determines if a ufo hits an asteroid and determines AI\r\n    * @param Ship ship - must be a ufo\r\n    * @param Asteroid asteroid - asteroid object\r\n    */\r\n  detectShipCrash(ship, asteroid) {\r\n    var dx = ship.x - asteroid.x;\r\n    var dy = ship.y - asteroid.y;\r\n    var distance = dx * dx + dy * dy;\r\n    if(distance < Math.pow(asteroid.radius + ship.radius, 2)) {\r\n      return true;\r\n    }\r\n    if(ship.asteroid === asteroid) {\r\n      return;\r\n    }\r\n    if(distance < Math.pow(ship.bufferRadius + asteroid.radius, 2)) {\r\n      let direction = Math.getDirection(asteroid.x, asteroid.y, ship.x, ship.y);\r\n      ship.alterPath(direction);\r\n      if(ship.color === 'blue' && asteroid.radius < ship.critical && ship.asteroid === '') {\r\n        ship.catchAsteroid(asteroid)\r\n      }\r\n      //Check if UFO is on the verge of crashing\r\n      else if (distance < Math.pow(ship.critical + asteroid.radius, 2)) {\r\n        //Deploy Counter Measures!!\r\n        if(!ship.reloading) {\r\n          this.ufoProjectile(ship, asteroid.x, asteroid.y);\r\n        }\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /** @function explode()\r\n    * function to create explosion particle effects\r\n    * @param floats x, y - position of explosion\r\n    * @param string color - determines the color of particles to be created\r\n    */\r\n  explode(x, y, color) {\r\n    var numParticles = Math.randomInt(30, 70);\r\n    var dir = Math.randomBetween(0, Math.PI * 2);\r\n    for(var i = 0; i < numParticles; i ++) {\r\n      if(Math.randomInt(0, 100) > 90) {\r\n        dir = Math.randomBetween(0, Math.PI * 2);\r\n      }\r\n      this.particles.push(new Particle(x, y, Math.PI * dir, 3, color, 20));\r\n    }\r\n  }\r\n\r\n  /** @function teleport()\r\n    * function to handle the teleport extra credit\r\n    * Checks if the area is clear before chosing a spot\r\n    */\r\n  teleport() {\r\n    //Random position\r\n    var x = Math.randomBetween(100, 900);\r\n    var y = Math.randomBetween(100, 900);\r\n    //So you don't spawn right next to something and immediately die\r\n    var buffer = 50;\r\n    var collision = false;\r\n    //Loop until you find something, potentially opens the door for infinite loop, but extremely unlikely with the small buffer, and everything is constantly moving\r\n    do {\r\n      if(collision) {\r\n        x = Math.randomBetween(100, 900);\r\n        y = Math.randomBetween(100, 900);\r\n        collision = false;\r\n      }\r\n      //Checks if the ufo is nearby\r\n      this.ufos.forEach(ufo => {\r\n        if(Math.circleCollisionDetection(x, y, this.ship.radius, ufo.x, ufo.y, ufo.radius + 2 * buffer)) {\r\n          collision = true;\r\n        }\r\n      });\r\n      this.asteroids.forEach(asteroid => {\r\n        //Check if new space is free of asteroids\r\n        if(Math.circleCollisionDetection(x, y, this.ship.radius, asteroid.x, asteroid.y, asteroid.radius + buffer)) {\r\n          collision = true;\r\n        }\r\n      });\r\n      this.projectiles.forEach(projectile => {\r\n        //Check if the new space if free of projectiles\r\n        if(Math.circleCollisionDetection(projectile.x, projectile.y, projectile.radius, x, y, this.ship.radius + buffer)) {\r\n          collision = true;\r\n        }\r\n      });\r\n    } while(collision);\r\n    //Particle explosion in the to & from spots\r\n    this.explode(this.ship.x, this.ship.y, this.ship.color);\r\n    this.explode(x, y, this.ship.color);\r\n    this.audioController.trigger('teleport');\r\n    this.ship.x = x;\r\n    this.ship.y = y;\r\n    //Resets you ships momentum, Reseting the momentum is definitely easier for the player\r\n    this.ship.speed.x = 0.0;\r\n    this.ship.speed.y = 0.0;\r\n  }\r\n\r\n  /** @function respawn()\r\n    * function to handle the player's ship getting destroyed\r\n    */\r\n  respawn() {\r\n    this.respawning = true;\r\n    this.lives--;\r\n    if(this.lives >= 0) {\r\n      this.ship = new Ship();\r\n    }\r\n    else {\r\n      this.gameOver = true;\r\n      /*this.theme.loop = false;\r\n      this.theme.pause();*/\r\n      this.audioController.trigger('game over');\r\n    }\r\n  }\r\n\r\n  /** @function destoryUFO()\r\n    * handles the ufo getting destroyed;\r\n    */\r\n  destoryUFO(ufoID) {\r\n    this.score += this.ufos[ufoID].bounty;\r\n    if(this.ufos[ufoID].bounty === 200) {\r\n      this.lives++;\r\n    }\r\n    this.kills++;\r\n    this.ufos.splice(ufoID, 1);\r\n    this.audioController.trigger('ship explosion');\r\n  }\r\n\r\n  checkHighScore() {\r\n    if(this.score > this.highscore) {\r\n      this.highscore = this.score;\r\n    }\r\n  }\r\n\r\n  /** @function drawHUD()\r\n    * function to draw the HUD at the bottom of the screen\r\n    */\r\n  drawHUD() {\r\n    this.HUDcontext.fillStyle = 'black';\r\n    this.HUDcontext.strokeStyle = 'blue';\r\n    this.HUDcontext.fillRect(0, 0, this.screenSide, 100);\r\n    this.HUDcontext.font = '30px Times New Roman';\r\n    this.HUDcontext.strokeText(\"LIVES: \" + this.lives, 10, 50);\r\n    this.HUDcontext.strokeText(\"LEVEL: \" + this.level, 400, 50);\r\n    this.HUDcontext.strokeText(\"SCORE: \" + this.score, 800, 50);\r\n    this.HUDcontext.strokeText(\"TELEPORTS: \" + this.teleports, 550, 50);\r\n    this.HUDcontext.strokeText(\"HIGHSCORE: \" + this.highscore , 150, 50);\r\n    this.HUDcontext.font = '20px Times New Roman';\r\n    this.HUDcontext.strokeText(\"CONTROLS: \", 10, 75);\r\n    this.HUDcontext.strokeText(\"W: Thurster  A: Rotate Left  D: Rotate Right  Space: Shoot  F: Teleport  P: Pause  ~: Reset\", 150, 75);\r\n  }\r\n\r\n  /** @function update()\r\n    * Handles updating all object and variables, comments laced throughout\r\n    */\r\n  update() {\r\n    //Update Ship\r\n    this.ship.update();\r\n    //Update UFO if applicable\r\n    this.ufos.forEach(ufo => {\r\n      if(ufo.color === 'orange' && ufo.goal === '') {\r\n        if(this.powerups.length > 0) {\r\n          let random = Math.randomInt(0, this.powerups.length - 1)\r\n          ufo.goal = {x: this.powerups[random].pos.x, y: this.powerups[random].pos.y}\r\n        }\r\n      }\r\n      ufo.update();\r\n      if(ufo.asteroid !== '') {\r\n        ufo.checkAsteroidAlignment(this.ship);\r\n      }\r\n    });\r\n    if(this.asteroids.length < this.constAsteroids) {\r\n      console.log(\"Adding asteroid\");\r\n      this.addAsteroid(-1.0);\r\n      this.numAsteroids++;\r\n    }\r\n    //Update each asteroid\r\n    this.asteroids.forEach(asteroid => {\r\n      asteroid.update();\r\n    });\r\n\r\n    //Update Level if no more asteroids\r\n    if(this.kills !== 0 && this.kills % (this.level * 5) === 0) {\r\n      this.level++;\r\n      //You Will Probably Need These\r\n      this.lives++;\r\n      this.teleports += this.level;\r\n      let initAsteroids = 5 + 2 * this.level;\r\n      if(initAsteroids > this.MAXASTEROIDS) {\r\n        initAsteroids = this.MAXASTEROIDS;\r\n      }\r\n      let difference = initAsteroids - this.asteroids.length;\r\n      if(this.asteroids.length < initAsteroids) {\r\n        for(let i = 0; i < difference; i++) {\r\n          this.addAsteroid(-1.0);\r\n          this.numAsteroids++;\r\n        }\r\n      }\r\n      this.constAsteroids = this.numAsteroids;\r\n    }\r\n\r\n    //Determine UFO spawning\r\n    if(this.ufoTimer > 0 && this.ufos.length < this.MAXUFO) {\r\n      this.ufoTimer--;\r\n      if(this.ufoTimer <= 0) {\r\n        this.addUFO();\r\n        this.ufoTimer = Math.randomInt(this.UFOTIME * (this.ufos.length / this.level), this.UFOTIME * 2 * (this.ufos.length / this.level));\r\n      }\r\n    }\r\n\r\n    this.powerupTimer--;\r\n    if(this.powerupTimer <= 0) {\r\n      this.createPowerUp();\r\n      this.powerupTimer = Math.randomInt(this.POWERTIME * this.powerups.length, this.POWERTIME * 3 * this.powerups.length)\r\n    }\r\n\r\n    //Control respawning\r\n    if(this.respawning) {\r\n      this.respawnTimer--;\r\n      if(this.respawnTimer <= 0) {\r\n        //Done respawning, ship can now be destroyed again\r\n        this.respawnTimer = 300;\r\n        this.respawning = false;\r\n      }\r\n    }\r\n\r\n    //Checks for collisions between asteroids\r\n    for(let i = 0; i < this.asteroids.length; i++) {\r\n      for(let j = i + 1; j < this.asteroids.length; j++) {\r\n        if(Math.circleCollisionDetection(this.asteroids[i].x, this.asteroids[i].y, this.asteroids[i].radius, this.asteroids[j].x, this.asteroids[j].y, this.asteroids[j].radius)) {\r\n          this.particleCollision(this.asteroids[i], this.asteroids[j]);\r\n          this.audioController.trigger('collision');\r\n        }\r\n      }\r\n    }\r\n\r\n    //Checks for collisions between projectiles and asteroids\r\n    for(let i = 0; i < this.projectiles.length; i++) {\r\n      for(let j = 0; j < this.asteroids.length; j++) {\r\n        if(Math.circleCollisionDetection(this.projectiles[i].x, this.projectiles[i].y, this.projectiles[i].radius, this.asteroids[j].x, this.asteroids[j].y, this.asteroids[j].radius)) {\r\n          this.explode(this.projectiles[i].x, this.projectiles[i].y, this.projectiles[i].color);\r\n          this.projectiles.splice(i, 1);\r\n          this.explode(this.asteroids[j].x, this.asteroids[j].y, 'white');\r\n          this.handleAsteriodExplosion(j);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    if(!this.respawning) {\r\n      //Check for ship crashing\r\n      this.asteroids.forEach(asteroid => {\r\n        if(Math.circleCollisionDetection(this.ship.x, this.ship.y, this.ship.radius, asteroid.x, asteroid.y, asteroid.radius)) {\r\n          this.explode(this.ship.x, this.ship.y, this.ship.color);\r\n          this.audioController.trigger('ship explosion');\r\n          this.respawn();\r\n        }\r\n      });\r\n    }\r\n\r\n    //Check if a ship or UFO picks up a powerup\r\n    for(let i = 0; i < this.powerups.length; i++) {\r\n      if(Math.circleCollisionDetection(this.ship.x, this.ship.y, this.ship.radius, this.powerups[i].pos.x, this.powerups[i].pos.y, this.powerups[i].radius)) {\r\n        this.explode(this.ship.x, this.ship.y, this.ship.color);\r\n        this.ship.powerups[this.powerups[i].type] = true;\r\n        this.ship.powerupTimers[this.powerups[i].type] += this.powerups[i].timer;\r\n        if(this.powerups[i].type === 2) {\r\n          this.ship.reloading = false;\r\n          this.ship.rateOfFire = this.ship.RATE / 2\r\n        }\r\n        this.powerups.splice(i, 1);\r\n        break;\r\n      }\r\n      for(let j = 0; j < this.ufos.length; j++) {\r\n        if(Math.circleCollisionDetection(this.ufos[j].x, this.ufos[j].y, this.ufos[j].radius, this.powerups[i].pos.x, this.powerups[i].pos.y, this.powerups[i].radius)) {\r\n          this.explode(this.ufos[j].x, this.ufos[j].y, this.ufos[j].color);\r\n          this.ufos[j].powerups[this.powerups[i].type] = true;\r\n          this.ufos[j].powerupTimers[this.powerups[i].type] += this.powerups[i].timer;\r\n          if(this.powerups[i].type === 2) {\r\n            this.ufos[j].reloading = false;\r\n            this.ufos[j].setRateOfFire();\r\n          }\r\n          this.powerups.splice(i, 1);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    for(let i = 0; i < this.powerups.length; i++) {\r\n      for(let k = 0; k < this.asteroids.length; k++) {\r\n        if(Math.circleCollisionDetection(this.asteroids[k].x, this.asteroids[k].y, this.asteroids[k].radius, this.powerups[i].pos.x, this.powerups[i].pos.y, this.powerups[i].radius)) {\r\n          this.explode(this.powerups[i].pos.x, this.powerups[i].pos.y, this.powerups[i].color);\r\n          this.powerups.splice(i, 1);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    for(let i = 0; i < this.ufos.length; i++) {\r\n      for(let j = 0; j < this.asteroids.length; j++) {\r\n        if(this.detectShipCrash(this.ufos[i], this.asteroids[j])) {\r\n          this.explode(this.ufos[i].x, this.ufos[i].y, this.ufos[i].color);\r\n          this.destoryUFO(i);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    if(this.ufos.length > 1) {\r\n      for(let i = 0; i < this.ufos.length; i++) {\r\n        for(let j = i + 1; j < this.ufos.length; j++) {\r\n          if(Math.circleCollisionDetection(this.ufos[i].x, this.ufos[i].y, this.ufos[i].critical, this.ufos[j].x, this.ufos[j].y, this.ufos[j].critical)) {\r\n            if(this.ufos[i].color === 'purple' && !this.ufos[i].reloading) {\r\n              this.ufoProjectile(this.ufos[i], this.ufos[j].x, this.ufos[j].y);\r\n            }\r\n            if(this.ufos[j].color === 'purple' && !this.ufos[i].reloading) {\r\n              this.ufoProjectile(this.ufos[j], this.ufos[i].x, this.ufos[i].y);\r\n            }\r\n            //Get the direction from the first ufo to the second.\r\n            let dir = Math.getDirection(this.ufos[i].x, this.ufos[i].y, this.ufos[j].x, this.ufos[j].y)\r\n            //Point the direction the other way\r\n            this.ufos[i].alterPath(dir + Math.PI);\r\n            //From the second ufo's perspective, this is pointing away from ufo 1\r\n            this.ufos[j].alterPath(dir);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    if(!this.respawning) {\r\n      this.ufos.forEach(ufo => {\r\n        if(Math.circleCollisionDetection(this.ship.x, this.ship.y, this.ship.radius, ufo.x, ufo.y, ufo.radius)) {\r\n          this.explode(this.ship.x, this.ship.y, this.ship.color);\r\n          this.audioController.trigger('ship explosion');\r\n          this.respawn();\r\n        }\r\n      });\r\n    }\r\n\r\n    //projectile ship collision checks\r\n    for(let i = 0; i < this.projectiles.length; i++) {\r\n      if(!this.respawning && Math.circleCollisionDetection(this.projectiles[i].x, this.projectiles[i].y, this.projectiles[i].radius,\r\n        this.ship.x, this.ship.y, this.ship.radius)) {\r\n        if(this.ship.powerups[3]) {\r\n          this.explode(this.ship.x, this.ship.y, 'magenta');\r\n          this.ship.powerups[3] = false;\r\n          this.ship.powerupTimers[3] = 0;\r\n        }\r\n        else {\r\n          this.explode(this.ship.x, this.ship.y, this.ship.color);\r\n          this.audioController.trigger('ship explosion');\r\n          this.respawn();\r\n        }\r\n        this.explode(this.projectiles[i].x, this.projectiles[i].y, this.projectiles[i].color);\r\n        this.projectiles.splice(i, 1);\r\n        break;\r\n      }\r\n      for(let j = 0; j < this.ufos.length; j ++) {\r\n        if(this.ufos[j].color === 'purple' && this.ufos[j].clock === 60) {\r\n          if(this.projectileDodger(this.ufos[j], this.projectiles[i])) {\r\n            if(this.ufos[j].powerups[3]) {\r\n              this.explode(this.ufos[j].x, this.ufos[j].y, 'magenta');\r\n              this.ufos[j].powerups[3] = false;\r\n              this.ufos[j].powerupTimers[3] = 0;\r\n            }\r\n            else {\r\n              this.explode(this.ufos[j].x, this.ufos[j].y, this.ufos[j].color);\r\n              this.destoryUFO(j);\r\n              this.audioController.trigger('ship explosion');\r\n            }\r\n            this.explode(this.projectiles[i].x, this.projectiles[i].y, this.projectiles[i].color);\r\n            this.projectiles.splice(i, 1);\r\n            break;\r\n          }\r\n        }\r\n        else if (Math.circleCollisionDetection(this.projectiles[i].x, this.projectiles[i].y, this.projectiles[i].radius,\r\n          this.ufos[j].x, this.ufos[j].y, this.ufos[j].radius)) {\r\n            if(this.ufos[j].powerups[3]) {\r\n              this.explode(this.ufos[j].x, this.ufos[j].y, 'magenta');\r\n              this.ufos[j].powerups[3] = false;\r\n              this.ufos[j].powerupTimers[3] = 0;\r\n            }\r\n            else {\r\n              this.explode(this.ufos[j].x, this.ufos[j].y, this.ufos[j].color);\r\n              this.destoryUFO(j);\r\n              this.audioController.trigger('ship explosion');\r\n            }\r\n            this.explode(this.projectiles[i].x, this.projectiles[i].y, this.projectiles[i].color);\r\n            this.projectiles.splice(i, 1);\r\n            break;\r\n        }\r\n      }\r\n    }\r\n\r\n    //Input Map Applying\r\n    //A or Left Arrow\r\n    if(this.keyMap[65] || this.keyMap[37]){\r\n      this.ship.accel.dir -= 0.07;\r\n      if(this.ship.accel.dir <= -Math.PI * 2) {\r\n        this.ship.accel.dir += Math.PI * 2;\r\n      }\r\n    }\r\n    //D or Right Arrow\r\n    if(this.keyMap[68] || this.keyMap[39]) {\r\n      this.ship.accel.dir += 0.07;\r\n      if(this.ship.accel.dir >= Math.PI * 2) {\r\n        this.ship.accel.dir -= Math.PI * 2;\r\n      }\r\n    }\r\n    //W or Up Arrow\r\n    if((this.respawnTimer <= 150 || !this.respawning)) {\r\n      this.ship.boosting = false;\r\n      if(this.keyMap[13] && this.ship.boost >= 0) {\r\n        this.ship.boosting = true;\r\n        this.ship.boost--;\r\n        this.ship.updateSpeed(this.ship.accel.mag * 3);\r\n        let numParticles = Math.floor(Math.randomBetween(4, 8));\r\n        this.ship.createParticles(numParticles);\r\n      }\r\n      else if ((this.keyMap[87] || this.keyMap[38])) {\r\n        this.ship.updateSpeed(this.ship.accel.mag);\r\n        let numParticles = Math.floor(Math.randomBetween(1, 4));\r\n        this.ship.createParticles(numParticles);\r\n      }\r\n    }\r\n    //Space\r\n    if(this.keyMap[32] && !this.ship.reloading && !this.respawning) {\r\n      this.createProjectile();\r\n      this.audioController.trigger('shoot');\r\n    }\r\n    //F\r\n    if(this.keyMap[70] && this.teleports > 0 && !this.respawning && this.coolingDown === 50) {\r\n      this.teleport();\r\n      this.teleports--;\r\n      this.coolingDown--;\r\n    }\r\n    //UFOs firing\r\n    for(let i = 0; i < this.ufos.length; i++) {\r\n      let ufo = this.ufos[i];\r\n      ufo.rateOfFire--;\r\n      if(ufo.rateOfFire <= 0) {\r\n        this.ufoProjectile(ufo, this.ship.x, this.ship.y);\r\n        ufo.setRateOfFire();\r\n      }\r\n    }\r\n\r\n    //Control Teleport/Prevent multiple from a single button Press\r\n    if(this.coolingDown < 50) {\r\n      this.coolingDown--;\r\n      if(this.coolingDown <= 0) {\r\n        this.coolingDown = 50;\r\n      }\r\n    }\r\n\r\n    //Update projectiles, if there are any\r\n    for(let i = 0; i < this.projectiles.length; i++) {\r\n      if(this.projectiles[i].color === 'green') {\r\n        this.projectiles[i].update(this.ufos);\r\n      }\r\n      else {\r\n        this.projectiles[i].update(this.ship);\r\n      }\r\n      if(this.projectiles[i].edgeDetection()) {\r\n        this.projectiles.splice(i, 1);\r\n      }\r\n    }\r\n\r\n    //update particles\r\n    for(let j = 0; j < this.particles.length; j++) {\r\n      this.particles[j].update();\r\n      if(this.particles[j].life <= 0) {\r\n        this.particles.splice(j, 1);\r\n      }\r\n    }\r\n\r\n    //Update highscore\r\n    this.checkHighScore();\r\n  }\r\n\r\n  /** @function render()\r\n    * standard render function, calls all other render funcitons and drawHUD\r\n    */\r\n  render() {\r\n    //Initial Setup\r\n    this.backBufferContext.fillStyle = 'black';\r\n    this.backBufferContext.strokeStyle = 'blue';\r\n    this.backBufferContext.font = '50px Times New Roman';\r\n    //Refresh canvas\r\n    this.backBufferContext.fillRect(0,0, this.screenSide, this.screenSide);\r\n    this.drawHUD();\r\n    //Display respawning if needed\r\n    if(this.respawning && !this.gameOver) {\r\n      this.backBufferContext.save();\r\n      this.backBufferContext.globalAlpha = 0.5;\r\n      this.backBufferContext.strokeText(\"RESPAWNING\", 350, 500);\r\n      this.backBufferContext.restore();\r\n    }\r\n    //Draw UFOs\r\n    this.ufos.forEach(ufo => {\r\n      ufo.render(this.backBufferContext);\r\n    });\r\n    //Draw ship\r\n    if(!this.respawning || this.respawnTimer <= 150) {\r\n      this.ship.render(this.backBufferContext);\r\n    }\r\n    //Draw asteroids\r\n    this.asteroids.forEach(asteroid => {\r\n      asteroid.render(this.backBufferContext);\r\n    });\r\n    //draw projectiles\r\n    this.projectiles.forEach(projectile => {\r\n      projectile.render(this.backBufferContext);\r\n    });\r\n    this.powerups.forEach(powerup => {\r\n      powerup.render(this.backBufferContext);\r\n    });\r\n    //draw particles\r\n    this.particles.forEach(particle => {\r\n      particle.render(this.backBufferContext);\r\n    });\r\n    //Bit blit the back buffer onto the screen\r\n    this.screenBufferContext.drawImage(this.backBufferCanvas, 0, 0);\r\n  }\r\n\r\n  /** @function loop()\r\n    * continuously loops the update and render function unless gameOver or paused\r\n    */\r\n  loop() {\r\n    if(!this.paused && !this.gameOver) {\r\n      this.update();\r\n      this.render();\r\n    }\r\n    if(this.gameOver) {\r\n      this.screenBufferContext.font = \"50px Times New Roman\";\r\n      this.screenBufferContext.strokeText(\"GAME OVER\", 350, 500);\r\n      this.screenBufferContext.strokeText(\"Retry? Press ~\", 360, 600);\r\n    }\r\n    if(this.paused) {\r\n      this.screenBufferContext.font = \"50px Times New Roman\";\r\n      this.screenBufferContext.strokeText(\"Paused\", 425, 600);\r\n    }\r\n  }\r\n}\r\n","import Game from './game.js';\r\nimport './game.css';\r\n\r\nexport default class Menu {\r\n\tconstructor() {\r\n\t\tthis.screenWidth = 1000\r\n\t\tthis.gameState = 'menu'\r\n\t\tthis.highlighted = 'start'\r\n\t\tthis.buttons = ['start', 'options']\r\n\r\n\t\twindow.onmousedown = this.handleMouseDown;\r\n\t\twindow.onkeydown = this.handleKeyDown;\r\n\t}\r\n\r\n\thandleKeyDown(event){\r\n\t\tevent.preventDefualt();\r\n\r\n\t\tif(this.gameState === 'menu') {\r\n\r\n\t\t}\r\n\t}\r\n\r\n}\r\nnew Game();\r\n"],"sourceRoot":""}