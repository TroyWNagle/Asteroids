(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[function(t,i,e){t.exports=e(4)},function(t,i){Math.tau=2*Math.PI,Math.randomBetween=function(t,i){return Math.random()*(i-t)+t},Math.randomInt=function(t,i){var e=Math.floor(t),s=Math.ceil(i);return Math.round(Math.random()*(s-e))+e},Math.getDirection=function(t,i,e,s){var h=t-e,o=i-s,r=Math.sqrt(h*h+o*o),a=Math.acos(o/r);return h>0&&(a*=-1),a<0&&(a+=Math.tau),a},Math.getDir=function(t,i,e,s,h){var o=i-s,r=e-h,a=Math.acos(r/t);return o>0&&(a*=-1),a<0&&(a+=Math.tau),a},Math.getDistance=function(t,i,e,s){var h=t-e,o=i-s;return Math.sqrt(h*h+o*o)},Math.circleCollisionDetection=function(t,i,e,s,h,o){var r=t-s,a=i-h;return!(r>e+o||a>e+o)&&!(r*r+a*a>=(e+o)*(e+o))},Math.circleRectangleCollision=function(t,i,e,s,h,o,r){var a=s+o/2,n=h+r/2,l=Math.abs(t-a),u=Math.abs(i-n);return!(l>o/2+e)&&(!(u>r/2+e)&&(l<=o/2||(u<=r/2||(l-o/2)*(l-o/2)+(u-r/2)*(u-r/2)<=e*e)))}},function(t,i,e){},,function(t,i,e){"use strict";function s(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function h(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function o(t,i,e){return i&&h(t.prototype,i),e&&h(t,e),t}e.r(i);var r=function(){function t(i,e,h){s(this,t),this.pool=new Float32Array(6*i),this.end=0,this.max=i,this.color=e,this.speed=h}return o(t,[{key:"add",value:function(t,i,e,s,h){var o=Math.randomInt(1,this.speed),r=Math.sin(e)*o,a=-Math.cos(e)*o,n=h+Math.randomBetween(-.5,.5);if(this.end<this.max){var l=6*this.end;this.pool[l]=t,this.pool[l+1]=i,this.pool[l+2]=r,this.pool[l+3]=a,this.pool[l+4]=s,this.pool[l+5]=n,this.end++}}},{key:"update",value:function(){for(var t=0;t<this.end;t++){var i=6*t;if(this.pool[i]+=this.pool[i+2],this.pool[i+1]+=this.pool[i+3],Math.abs(this.pool[i+2])>0&&(this.pool[i+2]>0?this.pool[i+2]+=this.pool[i+4]:this.pool[i+2]-=this.pool[i+4]),Math.abs(this.pool[i+3])>0&&(this.pool[i+3]>0?this.pool[i+3]+=this.pool[i+4]:this.pool[i+3]-=this.pool[i+4]),this.pool[i+5]-=.1,this.pool[i+5]<=0){var e=6*(this.end-1);this.pool[i]=this.pool[e],this.pool[i+1]=this.pool[e+1],this.pool[i+2]=this.pool[e+2],this.pool[i+3]=this.pool[e+3],this.pool[i+4]=this.pool[e+4],this.pool[i+5]=this.pool[e+5],this.end--,t--}}}},{key:"render",value:function(t){t.save(),t.beginPath(),t.fillStyle=this.color;for(var i=0;i<this.end;i++)t.moveTo(this.pool[6*i],this.pool[6*i+1]),t.arc(this.pool[6*i],this.pool[6*i+1],1,0,Math.tau);t.fill(),t.restore()}}]),t}(),a=function(){function t(i,e){s(this,t),this.x=500,this.y=950,this.width=400,this.height=25,this.MAXBOOST=e,this.boost=i,this.particles=new r(200,"green",5),this.fillLength=this.width*(this.boost/this.MAXBOOST)}return o(t,[{key:"createParticles",value:function(t){for(var i=1+this.x-this.width/2,e=0;e<t;e++){var s=Math.randomBetween(this.y-this.height/2,this.y+this.height/2);this.particles.add(i,s,Math.PI/2,0,7.5)}}},{key:"update",value:function(){this.fillLength=this.width*(this.boost/this.MAXBOOST),this.createParticles(3),this.particles.update()}},{key:"render",value:function(t){t.save(),t.strokeStyle="blue",t.fillStyle="blue",t.globalAlpha=.3,t.strokeRect(this.x-this.width/2,this.y-this.height/2,this.width,this.height),t.fillRect(this.x-this.width/2,this.y-this.height/2,this.fillLength,this.height),t.restore(),this.particles.render(t)}}]),t}(),n=function(){function t(i,e,h,o){s(this,t),this.x=i,this.y=e,this.timer=o,this.type=h,this.initColor()}return o(t,[{key:"initColor",value:function(){switch(this.type){case 1:this.color="red",this.string="Homing: ";break;case 2:this.color="green",this.string="Rapid: ";break;case 3:this.color="magenta",this.string="Shield: "}}},{key:"render",value:function(t){t.save(),t.fillStyle=this.color,t.font="25px Arial",t.globalAlpha=.6,t.fillText(this.string+(this.timer/60).toFixed(1),this.x,this.y),t.restore()}}]),t}(),l=function(){function t(){s(this,t),this.x=500,this.y=500,this.RATE=40,this.reloading=!1,this.rateOfFire=this.RATE,this.accel={mag:.1,dir:0},this.velocity={mag:0,dir:0},this.speed={x:0,y:0},this.radius=12,this.boostParticles=new r(210,"blue",3),this.normalParticles=new r(80,"red",2),this.color="green",this.MAXBOOST=120,this.boosting=!1,this.boost=120,this.boostRecharge=1,this.TOPSPEED=3,this.powerups={1:!1,2:!1,3:!1},this.powerupTimers={1:0,2:0,3:0},this.powerUpDisplays={1:"",2:"",3:""},this.boostGauge=new a(this.boost,this.MAXBOOST)}return o(t,[{key:"updateSpeed",value:function(t){this.speed.y+=-Math.cos(this.accel.dir)*t,this.speed.x+=Math.sin(this.accel.dir)*t,Math.abs(this.speed.x)>=this.TOPSPEED&&(this.speed.x<0?this.speed.x=-this.TOPSPEED:this.speed.x=this.TOPSPEED),Math.abs(this.speed.y)>=this.TOPSPEED&&(this.speed.y<0?this.speed.y=-this.TOPSPEED:this.speed.y=this.TOPSPEED)}},{key:"setRateOfFire",value:function(){this.rateOfFire=this.RATE,this.powerups[2]&&(this.rateOfFire=this.RATE/2)}},{key:"edgeDetection",value:function(){this.x<=-this.radius&&(this.x=1e3),this.y<=-this.radius&&(this.y=1e3),this.x>=1e3+this.radius&&(this.x=0),this.y>=1e3+this.radius&&(this.y=0)}},{key:"createParticles",value:function(t){for(var i=this.x-Math.sin(this.accel.dir)*this.radius*1.2,e=this.y+Math.cos(this.accel.dir)*this.radius*1.2,s=0;s<t;s++){var h=i+Math.randomBetween(-3,3),o=e+Math.randomBetween(-3,3),r=this.accel.dir+Math.randomBetween(-.174533,.174533);this.boosting&&this.boost>0?this.boostParticles.add(h,o,Math.PI+r,-.05,3.5):this.normalParticles.add(h,o,Math.PI+r,-.05,2)}}},{key:"checkPowerUps",value:function(){for(var t=1;t<=3;t++)this.powerups[t]&&(this.powerupTimers[t]--,this.powerUpDisplays[t].timer--,this.powerupTimers[t]<=0&&(this.powerups[t]=!1,this.powerUpDisplays[t]=""))}},{key:"updateVelocity",value:function(){var t=Math.sqrt(this.speed.x*this.speed.x+this.speed.y*this.speed.y),i=Math.acos(this.speed.y/t);this.speed.x<0&&(i*=-1),i<0&&(i+=Math.tau),this.velocity.mag=t,this.velocity.dir=i}},{key:"update",value:function(){this.edgeDetection(),this.x+=this.speed.x,this.y+=this.speed.y,this.updateVelocity(),this.checkPowerUps(),this.reloading&&(this.rateOfFire--,this.rateOfFire<=0&&(this.setRateOfFire(),this.reloading=!1)),!this.boosting&&this.boost<this.MAXBOOST&&(this.boostRecharge*=-1,1===this.boostRecharge&&(this.boost++,this.boostGauge.boost=this.boost)),this.boostParticles.update(),this.normalParticles.update(),this.boostGauge.update()}},{key:"drawShield",value:function(t){t.save();var i=t.createRadialGradient(this.x,this.y,.5*this.radius,this.x,this.y,1.3*this.radius);i.addColorStop(0,"black"),i.addColorStop(1,"magenta"),t.fillStyle=i,t.globalAlpha=.3,t.beginPath(),t.arc(this.x,this.y,1.4*this.radius,0,Math.tau),t.closePath(),t.fill(),t.restore()}},{key:"createPowerUpDisplay",value:function(t,i){this.powerUpDisplays[t]=new n(5,1===t?400:2===t?500:600,t,i)}},{key:"updatePowerUpDisplay",value:function(t,i){this.powerUpDisplays[t].timer+=i}},{key:"render",value:function(t){this.powerups[3]&&this.drawShield(t);for(var i=1;i<4;i++)""!==this.powerUpDisplays[i]&&this.powerUpDisplays[i].render(t);t.save(),t.strokeStyle=this.color,t.beginPath(),t.translate(this.x,this.y),t.rotate(this.accel.dir);var e=1.2*this.radius;t.moveTo(0,-e),t.lineTo(10,e),t.lineTo(0,e/1.5),t.lineTo(-10,e),t.lineTo(0,-e),t.stroke(),t.restore(),this.boostParticles.render(t),this.normalParticles.render(t),this.boostGauge.render(t)}}]),t}(),u=function(){function t(i,e,h,o){s(this,t),this.x=i,this.y=e,this.held=!1,h<5&&(h=5),this.mass=h,this.radius=h,this.surfacePath=[],this.createSurface(),this.direction=o,this.velocity={x:0,y:0},this.angle=0,-1===this.direction?this.initVelocity():this.explodedVelocity()}return o(t,[{key:"initVelocity",value:function(){var t=Math.randomInt(8,10)/this.mass;this.x<0?this.velocity.x=Math.randomBetween(1,t):this.x>1e3+this.radius?this.velocity.x=-Math.randomBetween(1,t):this.velocity.x=Math.randomBetween(-t,t),this.y<0?this.velocity.y=Math.randomBetween(1,t):this.y>1e3+this.radius?this.velocity.y=-Math.randomBetween(1,t):this.velocity.y=Math.randomBetween(-t,t)}},{key:"createSurface",value:function(){for(var t,i,e=Math.tau/24,s=this.radius,h=0;h<24;h++)Math.randomInt(0,100)>70&&(s=Math.randomBetween(.8*this.radius,this.radius)),t=Math.cos(h*e)*s,i=-Math.sin(h*e)*s,this.surfacePath.push({x:t,y:i})}},{key:"explodedVelocity",value:function(){var t=Math.randomInt(9,12)/this.mass;this.velocity.x=Math.cos(this.direction)*t,this.velocity.y=-Math.sin(this.direction)*t}},{key:"edgeDetection",value:function(){this.x>=1e3+2.5*this.radius?this.x=-2.4*this.radius:this.x<=-2.5*this.radius&&(this.x=1e3+2.4*this.radius),this.y>=1e3+2.5*this.radius?this.y=-2.4*this.radius:this.y<=-2.5*this.radius&&(this.y=1e3+2.4*this.radius)}},{key:"update",value:function(){this.edgeDetection(),this.velocity.x>0?this.angle+=.01:this.angle-=.01,this.x+=this.velocity.x,this.y+=this.velocity.y}},{key:"render",value:function(t){t.save(),t.strokeStyle="white",t.translate(this.x,this.y),t.rotate(this.angle),t.beginPath(),t.moveTo(this.surfacePath[0].x,this.surfacePath[0].y);for(var i=1;i<this.surfacePath.length;i++)t.lineTo(this.surfacePath[i].x,this.surfacePath[i].y);t.closePath(),t.stroke(),t.restore()}}]),t}(),c=function(){function t(i,e,h,o){s(this,t),this.x=i,this.y=e,this.radius=3.5,this.color=o,h<0&&(h+=Math.tau),this.velocity={mag:5,dir:h},this.speed={x:0,y:0},this.initSpeed(),this.particlePool=new r(50,this.color,1)}return o(t,[{key:"createParticles",value:function(t){for(var i=this.x-Math.sin(this.velocity.dir)*this.radius,e=this.y+Math.cos(this.velocity.dir)*this.radius,s=0;s<t;s++){var h=i+Math.randomBetween(-this.radius,this.radius),o=e+Math.randomBetween(-this.radius,this.radius);this.particlePool.add(h,o,Math.PI*this.velocity.dir,-.05,1)}}},{key:"initSpeed",value:function(){this.speed.x=Math.sin(this.velocity.dir)*this.velocity.mag,this.speed.y=-Math.cos(this.velocity.dir)*this.velocity.mag}},{key:"edgeDetection",value:function(){return this.x+this.radius>=1e3||this.x-this.radius<=0||this.y+this.radius>=1e3||this.y-this.radius<=0}},{key:"update",value:function(t){this.createParticles(Math.randomInt(2,4)),this.x+=this.speed.x,this.y+=this.speed.y,this.particlePool.update()}},{key:"render",value:function(t){t.save(),t.strokeStyle=this.color,t.beginPath(),t.arc(this.x,this.y,this.radius,0,Math.tau),t.closePath(),t.stroke(),t.restore(),this.particlePool.render(t)}}]),t}();function d(t){return(d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t){return(p="function"===typeof Symbol&&"symbol"===d(Symbol.iterator)?function(t){return d(t)}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":d(t)})(t)}function f(t,i){return!i||"object"!==p(i)&&"function"!==typeof i?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):i}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,i,e){return(v="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,i,e){var s=function(t,i){for(;!Object.prototype.hasOwnProperty.call(t,i)&&null!==(t=y(t)););return t}(t,i);if(s){var h=Object.getOwnPropertyDescriptor(s,i);return h.get?h.get.call(e):h.value}})(t,i,e||t)}function g(t,i){return(g=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function x(t,i){if("function"!==typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&g(t,i)}var m=function(t){function i(t,e,h,o){var r;return s(this,i),(r=f(this,y(i).call(this,t,e,h,o))).correction=.0174533*1.25,r.target=null,r.past=[],r.width=1,r}return x(i,c),o(i,[{key:"findTarget",value:function(t){for(var i=1e4,e=0;e<t.length;e++){var s=0;this.target!==t[e]&&(s=this.findDistance(t[e])),s<i&&(this.target=t[e],i=s)}1e4===i&&(this.target=null)}},{key:"findDistance",value:function(t){var i=this.x-t.x,e=this.y-t.y;return Math.sqrt(i*i+e*e)}},{key:"findDirection",value:function(t){var i=this.x-t.x,e=this.y-t.y,s=Math.sqrt(i*i+e*e),h=Math.acos(e/s);return i>0&&(h*=-1),h<0&&(h+=Math.tau),h}},{key:"adjustDirection",value:function(){var t=this.findDirection(this.target);this.velocity.dir<0&&(this.velocity.dir+=Math.tau);var i=this.velocity.dir-t;i>Math.PI&&(i-=Math.tau),i<-Math.PI&&(i+=Math.tau),i>0&&(this.velocity.dir-=this.correction),i<0&&(this.velocity.dir+=this.correction)}},{key:"storePast",value:function(){var t={x:this.x,y:this.y};this.past.push(t),this.past.length>30&&this.past.splice(0,1)}},{key:"alterPast",value:function(){this.past.forEach(function(t){t.x+=Math.randomBetween(-1,1),t.y+=Math.randomBetween(-1,1)})}},{key:"update",value:function(t){"green"===this.color?t.length>0&&this.findTarget(t):this.target=t,this.target&&(this.adjustDirection(),v(y(i.prototype),"initSpeed",this).call(this)),this.storePast(),this.x+=this.speed.x,this.y+=this.speed.y,this.alterPast()}},{key:"render",value:function(t){v(y(i.prototype),"render",this).call(this,t),t.save(),t.strokeStyle=this.color,t.lineWidth=this.width;for(var e=0;e<this.past.length-1;e++)t.beginPath(),t.moveTo(this.past[e].x,this.past[e].y),t.lineTo(this.past[e+1].x,this.past[e+1].y),t.stroke(),t.lineWidth+=.1;t.restore()}}]),i}(),k=function(t){function i(t,e){var h;return s(this,i),(h=f(this,y(i).call(this))).boostParticles=null,h.x=t,h.y=e,h.rotation=0,h.accel={mag:0,dir:0},h.acceleration=.2,h.asteroid="",h.innerRadius=10,h.radius=25,h.bufferRadius=75,h.critical=40,h.color="",h.type="",h.clock=0,h.bounty=0,h.setColor(),h.normalParticles.color=h.color,h.normalParticles.speed=1,h.setClock(),h.rateOfFire=0,h.setRateOfFire(),h.lineSegments=[],h.initLineSegments(),h.goal="",h.initVelocity(),h}return x(i,l),o(i,[{key:"setColor",value:function(){var t,i=Math.randomInt(0,101);i>90?(t="fuchsia",this.type="Elite",this.bounty=500):i>85?(t="purple",this.type="Dodger",this.bounty=200):i>45?(t="blue",this.type="Hurler",this.bounty=150):(t="orange",this.bounty=100,this.type="Theif"),this.color=t}},{key:"setClock",value:function(){this.CLOCK=0,"Dodger"===this.type?(this.CLOCK=5,this.clock=this.CLOCK):"Elite"===this.type?(this.CLOCK=1,this.clock=this.CLOCK):"Hurler"===this.type?(this.CLOCK=30,this.clock=this.CLOCK):(this.CLOCK=60,this.clock=this.CLOCK)}},{key:"setRateOfFire",value:function(){"Dodger"===this.type?this.rateOfFire=Math.randomInt(150,350):"Elite"===this.type?this.rateOfFire=Math.randomInt(75,150):"Hurler"===this.type?this.rateOfFire=Math.randomInt(300,700):this.rateOfFire=Math.randomInt(300,500),this.powerups[2]&&(this.rateOfFire=Math.round(this.rateOfFire/2))}},{key:"initLineSegments",value:function(){for(var t,i,e,s,h=0;h<6;h++){var o=Math.cos(h*Math.PI/3),r=Math.sin(h*Math.PI/3);t=o*this.innerRadius,i=o*this.radius,e=-r*this.innerRadius,s=-r*this.radius,this.lineSegments.push({xI:t,xF:i,yI:e,yF:s})}}},{key:"initVelocity",value:function(){this.goal={x:Math.randomBetween(200,800),y:Math.randomBetween(200,800)}}},{key:"updateSpeed",value:function(){this.speed.y+=-Math.cos(this.accel.dir)*this.accel.mag,this.speed.x+=Math.sin(this.accel.dir)*this.accel.mag,Math.abs(this.speed.x)>=1.5&&(this.speed.x<0?this.speed.x=-1.5:this.speed.x=1.5),Math.abs(this.speed.y)>=1.5&&(this.speed.y<0?this.speed.y=-1.5:this.speed.y=1.5)}},{key:"edgeDetection",value:function(){(this.x+this.bufferRadius>=1e3&&this.speed.x>0||this.x-this.bufferRadius<=0&&this.speed.x<0)&&(this.speed.x*=-1,this.accel.dir+=Math.PI/2,this.accel.mag=0),(this.y+this.bufferRadius>=1e3&&this.speed.y>0||this.y-this.bufferRadius<=0&&this.speed.y<0)&&(this.speed.y*=-1,this.accel.dir+=Math.PI/2,this.accel.mag=0)}},{key:"goToGoal",value:function(){var t=Math.getDistance(this.x,this.y,this.goal.x,this.goal.y);this.accel.dir=Math.getDir(t,this.x,this.y,this.goal.x,this.goal.y),this.accel.mag=this.acceleration,t<this.radius&&(this.goal="")}},{key:"alterPath",value:function(t){this.accel.mag=this.acceleration,this.accel.dir=t,""!==this.goal&&(this.setClock(),this.clock--)}},{key:"catchAsteroid",value:function(t){this.asteroid=t,this.asteroid.held=!0,this.asteroid.velocity.x=this.speed.x,this.asteroid.velocity.y=this.speed.y}},{key:"orbitAsteroid",value:function(){var t=Math.getDistance(this.x,this.y,this.asteroid.x,this.asteroid.y),i=Math.getDir(t,this.x,this.y,this.asteroid.x,this.asteroid.y),e=this.x+Math.sin(i+.02)*t,s=this.y-Math.cos(i+.02)*t;this.asteroid.x=e,this.asteroid.y=s}},{key:"checkAsteroidAlignment",value:function(t){var i=Math.getDirection(this.x,this.y,this.asteroid.x,this.asteroid.y),e=i-Math.getDirection(this.x,this.y,t.x,t.y);if(Math.abs(e)<5*Math.PI/180){var s=30/this.asteroid.mass;this.asteroid.velocity.x=Math.sin(i)*s,this.asteroid.velocity.y=-Math.cos(i)*s,this.asteroid.held=!1,this.asteroid=""}}},{key:"createParticles",value:function(t){for(var i=0;i<t;i++){var e=this.velocity.dir+Math.randomBetween(-Math.PI,0),s=this.x-Math.cos(e)*this.radius,h=this.y+Math.sin(e)*this.radius;this.normalParticles.add(s,h,this.velocity.dir+Math.PI,-.05,3)}}},{key:"asteroidParticles",value:function(t){for(var i=this.asteroid.x,e=this.asteroid.y,s=0;s<t;s++){var h=Math.randomBetween(0,Math.tau),o=i+Math.cos(h)*this.asteroid.radius,r=e-Math.sin(h)*this.asteroid.radius;this.normalParticles.add(o,r,h,-.05,3)}}},{key:"checkPowerUps",value:function(){for(var t=1;t<=3;t++)this.powerups[t]&&(this.powerupTimers[t]--,this.powerupTimers[t]<=0&&(this.powerups[t]=!1))}},{key:"update",value:function(){if(this.edgeDetection(),this.updateSpeed(),this.checkPowerUps(),v(y(i.prototype),"updateVelocity",this).call(this),this.clock<this.CLOCK&&(this.clock--,this.clock<=0&&this.setClock()),this.clock===this.CLOCK&&""!==this.goal&&this.goToGoal(),this.reloading&&(this.rateOfFire--,this.rateOfFire<=0&&(this.setRateOfFire(),this.reloading=!1)),this.speed.x>0?this.rotation+=.01:this.rotation-=.01,""!==this.asteroid){var t=Math.getDistance(this.x,this.y,this.asteroid.x,this.asteroid.y);!this.asteroid.held||t>this.bufferRadius+this.asteroid.radius?(this.asteroid.held=!1,this.asteroid=""):(this.asteroid.velocity.x=this.speed.x,this.asteroid.velocity.y=this.speed.y,this.orbitAsteroid(),this.asteroidParticles(1))}this.x+=this.speed.x,this.y+=this.speed.y,Math.random()>.5&&this.createParticles(1),this.normalParticles.update()}},{key:"render",value:function(t){t.save(),t.strokeStyle=this.color,t.translate(this.x,this.y),t.rotate(this.rotation),t.beginPath(),t.arc(0,0,this.innerRadius,0,Math.tau),t.closePath(),t.stroke(),t.beginPath(),t.arc(0,0,this.radius,0,Math.tau),t.closePath(),t.stroke(),this.lineSegments.forEach(function(i){t.beginPath(),t.moveTo(i.xI,i.yI),t.lineTo(i.xF,i.yF),t.stroke()}),t.restore(),this.normalParticles.render(t),this.powerups[3]&&v(y(i.prototype),"drawShield",this).call(this,t)}}]),i}(),b=function(){function t(i,e,h){s(this,t),this.pos={x:i,y:e},this.type=h,this.radius=10,this.color="",this.timer=0,this.lineSegments=[],this.initPowerUp()}return o(t,[{key:"initPowerUp",value:function(){switch(this.type){case 1:this.timer=1e3,this.color="red",this.initLineSegments();break;case 2:this.timer=1200,this.color="green",this.initRapidLineSegments();break;case 3:this.timer=2700,this.color="magenta"}}},{key:"initRapidLineSegments",value:function(){var t,i,e,s,h=3*Math.PI/4,o=Math.PI/3,r=4*Math.PI/3;t=-Math.cos(h)*this.radius*.8,i=Math.cos(h)*this.radius*.8,e=-Math.sin(h)*this.radius*.8,s=Math.sin(h)*this.radius*.8,this.lineSegments.push({xI:t,xF:i,yI:e,yF:s}),t=-Math.cos(o)*this.radius*.9,i=Math.cos(h)*this.radius*.7,e=-Math.sin(o)*this.radius*.9,s=Math.sin(h)*this.radius*.7,this.lineSegments.push({xI:t,xF:i,yI:e,yF:s}),t=-Math.cos(r)*this.radius*.9,i=Math.cos(h)*this.radius*.7,e=-Math.sin(r)*this.radius*.9,s=Math.sin(h)*this.radius*.7,this.lineSegments.push({xI:t,xF:i,yI:e,yF:s})}},{key:"initLineSegments",value:function(){for(var t,i,e,s,h=0;h<2;h++){var o=Math.cos(h*Math.PI/2),r=Math.sin(h*Math.PI/2);t=o*this.radius,i=-o*this.radius,e=-r*this.radius,s=r*this.radius,this.lineSegments.push({xI:t,xF:i,yI:e,yF:s})}}},{key:"render",value:function(t){t.save(),t.strokeStyle=this.color,t.translate(this.pos.x,this.pos.y),t.beginPath(),t.arc(0,0,this.radius,0,Math.tau),t.closePath(),t.stroke(),t.beginPath(),t.rect(1.3*-this.radius,1.3*-this.radius,2.6*this.radius,2.6*this.radius),t.closePath(),t.stroke(),this.lineSegments.forEach(function(i){t.beginPath(),t.moveTo(i.xI,i.yI),t.lineTo(i.xF,i.yF),t.stroke()}),t.restore()}}]),t}(),w=function(){function t(i,e,h,o){s(this,t),this.x=i,this.y=e,this.type=o,this.string="",this.life=0,this.size=0,this.initSettings(h),this.color="yellow"}return o(t,[{key:"initSettings",value:function(t){switch(this.type){case"blip":this.life=40,this.size=25,this.string="+ "+t;break;case"annoucement":this.life="RESPAWNING"===t?300:120,this.size=50,this.string=t}}},{key:"update",value:function(){if(this.life--,this.life<=0)return!0}},{key:"render",value:function(t){t.save(),t.fillStyle=this.color,t.font=this.size+"px Arial",t.fillText(this.string,this.x,this.y),t.restore()}}]),t}(),M=function(){function t(i,e,h,o){s(this,t),this.x=i,this.y=e,this.type=h,this.info=o}return o(t,[{key:"render",value:function(t){t.save(),t.fillStyle="yellow",t.font="30px Arial",t.globalAlpha=.7,t.fillText(this.type+this.info,this.x,this.y),t.restore()}}]),t}(),C=(e(1),function(){function t(i){s(this,t),this.screenSide=i.screenWidth,this.menu=i,this.MAXUFO=5,this.MAXASTEROIDS=6,this.UFOTIME=500,this.POWERTIME=900,this.numAsteroids=3,this.ship=new l,this.ufos=[],this.kills=0,this.ufoTimer=Math.randomInt(this.UFOTIME,2*this.UFOTIME),this.respawning=!1,this.respawnTimer=300,this.projectiles=[],this.asteroids=[],this.createAsteroids(),this.particles=[],this.initParticlePools(),this.score=0,this.lives=3,this.level=1,this.popups=[],this.hudObjects={score:"",lives:"",level:""},this.initHUD(),this.constAsteroids=this.level*this.numAsteroids,this.teleports=10,this.coolingDown=50,this.powerups=[],this.powerupTimer=Math.randomInt(this.POWERTIME,3*this.POWERTIME),this.gameOver=!1,this.paused=!1,this.audioController=i.audioController,this.keyMap={13:!1,32:!1,37:!1,38:!1,39:!1,65:!1,68:!1,70:!1,87:!1,88:!1},this.backBufferContext=i.backBufferContext,this.backBufferCanvas=i.backBufferCanvas,this.screenBufferContext=i.screenBufferContext,this.loop=this.loop.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleKeyUp=this.handleKeyUp.bind(this),window.onkeydown=this.handleKeyDown,window.onkeyup=this.handleKeyUp,this.interval=setInterval(this.loop,50/3)}return o(t,[{key:"masterReset",value:function(){this.ship=new l,this.ufos=[],this.ufoTimer=Math.randomInt(this.UFOTIME,2*this.UFOTIME),this.powerups=[],this.powerupTimer=Math.randomInt(this.POWERTIME,3*this.POWERTIME),this.respawning=!1,this.respawnTimer=300,this.projectiles=[],this.asteroids=[],this.numAsteroids=3,this.createAsteroids(),this.particles=[],this.initParticlePools(),this.score=0,this.lives=3,this.level=1,this.constAsteroids=this.level*this.numAsteroids,this.teleports=10,this.coolingDown=50,this.popups=[],this.hudObjects={score:"",lives:"",level:""},this.initHUD(),this.gameOver=!1,this.paused=!1}},{key:"initParticlePools",value:function(){this.particles.push(new r(140,"green",5)),this.particles.push(new r(140,"white",5)),this.particles.push(new r(140,"blue",5)),this.particles.push(new r(140,"red",5)),this.particles.push(new r(140,"fuchsia",5)),this.particles.push(new r(140,"orange",5)),this.particles.push(new r(140,"purple",5))}},{key:"handleKeyDown",value:function(t){t.preventDefault(),80!==t.keyCode&&27!==t.keyCode||(this.paused=!0,this.menu.gameState="paused",this.menu.buttonNames[0]="resume",this.menu.buttonNames[1]="restart",this.menu.buttonNames[2]="mute",this.menu.drawPauseMenu()),"game"===this.menu.gameState&&(this.keyMap[t.keyCode]=!0)}},{key:"handleKeyUp",value:function(t){t.preventDefault(),this.keyMap[t.keyCode]=!1}},{key:"initHUD",value:function(){this.hudObjects.score=new M(.45*this.screenSide,.05*this.screenSide,"Score: ",this.score),this.hudObjects.lives=new M(.03*this.screenSide,.97*this.screenSide,"Lives: ",this.lives),this.hudObjects.level=new M(.87*this.screenSide,.97*this.screenSide,"Level: ",this.level)}},{key:"createProjectile",value:function(){var t=this.ship.x+Math.sin(this.ship.accel.dir)*this.ship.radius*1.3,i=this.ship.y-Math.cos(this.ship.accel.dir)*this.ship.radius*1.3;this.ship.powerups[1]?(this.projectiles.push(new m(t,i,this.ship.accel.dir,this.ship.color)),this.audioController.trigger("homing")):(this.projectiles.push(new c(t,i,this.ship.accel.dir,this.ship.color)),this.audioController.trigger("shoot")),this.ship.reloading=!0}},{key:"ufoProjectile",value:function(t,i,e){var s=Math.getDirection(t.x,t.y,i,e),h=t.x+Math.sin(s)*t.radius*1.2,o=t.y-Math.cos(s)*t.radius*1.2;t.powerups[1]?(this.projectiles.push(new m(h,o,s,t.color)),this.audioController.trigger("homing")):(this.projectiles.push(new c(h,o,s,t.color)),this.audioController.trigger("shoot")),t.reloading=!0}},{key:"createAsteroids",value:function(){for(;this.asteroids.length<this.numAsteroids;)this.addAsteroid(-1)}},{key:"addAsteroid",value:function(t){for(var i,e,s,h,o=this.asteroids.length;o===this.asteroids.length;){var r=!1,a=Math.randomInt(1,5);s=h=Math.randomBetween(10,75),1===a?(i=Math.randomBetween(-2*s,this.screenSide+2*s),e=-2*s):2===a?(i=this.screenSide+2*s,e=Math.randomBetween(-2*s,this.screenSide+2*s)):3===a?(i=Math.randomBetween(-2*s,this.screenSide+2*s),e=this.screenSide+2*s):(i=-2*s,e=Math.randomBetween(-2*s,this.screenSide+2*s));for(var n=0;n<o;n++){var l=this.asteroids[n];Math.circleCollisionDetection(l.x,l.y,l.radius,i,e,s)&&(r=!0)}r||this.asteroids.push(new u(i,e,h,t))}}},{key:"addUFO",value:function(){for(var t,i,e=this.ufos.length;e===this.ufos.length;){var s=!1,h=Math.randomInt(1,5);1===h?(t=Math.randomBetween(-50,1050),i=-50):2===h?(t=1050,i=Math.randomBetween(-50,1050)):3===h?(t=Math.randomBetween(-50,1050),i=1050):(t=-50,i=Math.randomBetween(-50,1050));for(var o=0;o<e;o++){var r=this.asteroids[o];Math.circleCollisionDetection(t,i,65,r.x,r.y,r.radius)&&(s=!0)}s||this.ufos.push(new k(t,i))}}},{key:"createPowerUp",value:function(){var t=Math.randomInt(.1*this.screenSide,.9*this.screenSide),i=Math.randomInt(.1*this.screenSide,.9*this.screenSide),e=Math.random();e>.66?this.powerups.push(new b(t,i,1)):e>.33?this.powerups.push(new b(t,i,2)):this.powerups.push(new b(t,i,3))}},{key:"rotate",value:function(t,i){return{x:t.x*Math.cos(i)-t.y*Math.sin(i),y:t.x*Math.sin(i)+t.y*Math.cos(i)}}},{key:"particleCollision",value:function(t,i){var e=t.velocity.x-i.velocity.x,s=t.velocity.y-i.velocity.y;if(e*(i.x-t.x)+s*(i.y-t.y)>=0){var h=-Math.atan2(i.y-t.y,i.x-t.x),o=0,r=0;o=!0===t.held?5*t.mass:t.mass,r=!0===i.held?5*i.mass:i.mass;var a=this.rotate(t.velocity,h),n=this.rotate(i.velocity,h),l={x:(a.x*(o-r)+2*r*n.x)/(o+r),y:a.y},u={x:(n.x*(r-o)+2*o*a.x)/(o+r),y:n.y},c=this.rotate(l,-h),d=this.rotate(u,-h);t.velocity.x=c.x,t.velocity.y=c.y,i.velocity.x=d.x,i.velocity.y=d.y}}},{key:"projectileDodger",value:function(t,i){var e=Math.getDistance(t.x,t.y,i.x,i.y);if(e<2*t.bufferRadius+i.radius){var s=Math.getDir(e,i.x,i.y,t.x,t.y);t.alterPath(s),t.setClock(),t.clock--}return e<t.radius+i.radius}},{key:"updateScore",value:function(t){this.score+=t,this.hudObjects.score.info=this.score}},{key:"handleAsteriodExplosion",value:function(t){var i=this.asteroids[t],e=i.mass,s=i.x,h=i.y;i.held=!1,this.asteroids.splice(t,1),this.audioController.trigger("explosion");var o=Math.floor(100/e);if(this.popups.push(new w(s,h,o,"blip")),this.updateScore(o),e>=15){var r=Math.randomInt(2,4);this.numAsteroids+=r-1,e/=r;for(var a=Math.randomBetween(0,Math.tau),n=Math.tau/r,l=0;l<r;l++){var c=s+Math.cos(a)*e,d=h-Math.sin(a)*e;this.asteroids.push(new u(c,d,e,a)),a+=n}}else this.numAsteroids--}},{key:"detectShipCrash",value:function(t,i){var e=t.x-i.x,s=t.y-i.y,h=e*e+s*s;if(h<(i.radius+t.radius)*(i.radius+t.radius))return!0;if(t.asteroid!==i){if(h<(t.bufferRadius+i.radius)*(t.bufferRadius+i.radius)){var o=Math.getDir(h,i.x,i.y,t.x,t.y);t.alterPath(o),("Hurler"===t.type||"Elite"===t.type)&&i.radius<t.critical&&""===t.asteroid?t.catchAsteroid(i):h<Math.pow(t.critical+i.radius,2)&&(t.reloading||this.ufoProjectile(t,i.x,i.y))}return!1}}},{key:"explode",value:function(t,i,e){for(var s=Math.randomInt(30,70),h=Math.randomBetween(0,Math.tau),o=0,r=0;r<this.particles.length;r++)if(this.particles[r].color===e){o=r;break}for(var a=0;a<s;a++)Math.random()>.4&&(h=Math.randomBetween(0,Math.tau)),this.particles[o].add(t,i,Math.PI+h,-.05,3.5)}},{key:"teleport",value:function(){var t=Math.randomBetween(100,900),i=Math.randomBetween(100,900),e=!1,s=0;do{e&&(t=Math.randomBetween(100,900),i=Math.randomBetween(100,900),e=!1),s=this.ufos.length;for(var h=0;h<s;h++){var o=this.ufos[h];Math.circleCollisionDetection(t,i,this.ship.radius,o.x,o.y,o.radius+100)&&(e=!0)}s=this.asteroids.length;for(var r=0;r<s;r++){var a=this.asteroids[r];Math.circleCollisionDetection(t,i,this.ship.radius,a.x,a.y,a.radius+50)&&(e=!0)}s=this.projectiles.length;for(var n=0;n<s;n++){var l=this.projectiles[n];Math.circleCollisionDetection(l.x,l.y,l.radius,t,i,this.ship.radius+50)&&(e=!0)}}while(e);this.explode(this.ship.x,this.ship.y,this.ship.color),this.explode(t,i,this.ship.color),this.audioController.trigger("teleport"),this.ship.x=t,this.ship.y=i,this.ship.speed.x=0,this.ship.speed.y=0}},{key:"respawn",value:function(){this.respawning=!0,this.popups.push(new w(350,400,"RESPAWNING","annoucement")),this.lives--,this.hudObjects.lives.info=this.lives,this.lives>=0?this.ship=new l:(this.gameOver=!0,this.menu.gameState="gameOver",this.menu.buttonNames[1]="restart",this.menu.buttonNames[2]="mute",this.audioController.trigger("game over"),this.audioController.stopTheme(),this.audioController.playMenu())}},{key:"destoryUFO",value:function(t){var i=this.ufos[t];this.updateScore(i.bounty),this.popups.push(new w(i.x,i.y,i.bounty,"blip")),""!==i.asteroid&&(i.asteroid.held=!1),500===i.bounty&&(this.lives++,this.hudObjects.lives.info=this.lives,this.createBlip("1 life")),this.kills++,this.ufos.splice(t,1),this.audioController.trigger("ship explosion")}},{key:"createPowerUpBlip",value:function(t){var i="";switch(t){case 1:i="Homing Lasers";break;case 2:i="Rapid Fire";break;case 3:i="Force Field"}this.createBlip(i)}},{key:"createBlip",value:function(t){var i=Math.randomInt(20,50);this.ship.y>500?this.popups.push(new w(this.ship.x,this.ship.y-i,t,"blip")):this.popups.push(new w(this.ship.x,this.ship.y+i,t,"blip"))}},{key:"projectileHit",value:function(t,i){var e=this.projectiles[i],s=!1;return t.powerups[3]?(this.explode(t.x,t.y,"fuchsia"),this.audioController.trigger("shield broken"),t.powerupTimers[3]=0,s=!1):(this.explode(t.x,t.y,t.color),this.audioController.trigger("ship explosion"),s=!0),this.explode(e.x,e.y,e.color),this.projectiles.splice(i,1),s}},{key:"pickUpPowerUp",value:function(t,i){t.powerups[i.type]=!0,t.powerupTimers[i.type]+=i.timer,2===i.type&&(t.reloading=!1,t.setRateOfFire())}},{key:"update",value:function(){for(var t=0;t<this.popups.length;t++)this.popups[t].update()&&this.popups.splice(t,1);this.ship.update();for(var i=this.ufos.length,e=0;e<i;e++){var s=this.ufos[e];if(("Theif"===s.type||"Elite"===s.type)&&""===s.goal&&this.powerups.length>0){var h=Math.randomInt(0,this.powerups.length-1);s.goal={x:this.powerups[h].pos.x,y:this.powerups[h].pos.y}}s.update(),""===s.asteroid||this.respawning||s.checkAsteroidAlignment(this.ship)}this.asteroids.length<this.constAsteroids&&(this.addAsteroid(-1),this.numAsteroids++),i=this.asteroids.length;for(var o=0;o<i;o++)this.asteroids[o].update();if(0!==this.kills&&this.kills%(Math.ceil(this.level*this.level/2)+1)===0){this.level++,this.hudObjects.level.info=this.level,this.popups.push(new w(450,500,"Level "+this.level,"annoucement")),this.lives++,this.hudObjects.lives.info=this.lives,this.createBlip("1 Life"),this.teleports+=this.level;var r=3+this.level;r>this.MAXASTEROIDS&&(r=this.MAXASTEROIDS);var a=r-this.asteroids.length;if(this.asteroids.length<r)for(var n=0;n<a;n++)this.addAsteroid(-1),this.numAsteroids++;this.constAsteroids=3+this.level,this.constAsteroids>this.MAXASTEROIDS&&(this.constAsteroids=this.MAXASTEROIDS)}if(this.ufoTimer>0&&this.ufos.length<this.MAXUFO&&(this.ufoTimer--,this.ufoTimer<=0)){this.addUFO();var l=this.ufos.length/this.level;this.ufoTimer=Math.randomInt(this.UFOTIME*l,2*this.UFOTIME*l)}if(this.powerupTimer--,this.powerupTimer<=0){this.createPowerUp();var u=2*this.powerups.length/this.level;this.powerupTimer=Math.randomInt(this.POWERTIME*u,2*this.POWERTIME*u)}this.respawning&&(this.respawnTimer--,this.respawnTimer<=0&&(this.respawnTimer=300,this.respawning=!1)),i=this.asteroids.length;for(var c=0;c<i;c++)for(var d=c+1;d<i;d++){var p=this.asteroids[c],f=this.asteroids[d];Math.circleCollisionDetection(p.x,p.y,p.radius,f.x,f.y,f.radius)&&(this.particleCollision(p,f),this.audioController.trigger("collision"))}for(var y=0;y<this.projectiles.length;y++)for(var v=0;v<this.asteroids.length;v++){var g=this.projectiles[y],x=this.asteroids[v];if(Math.circleCollisionDetection(g.x,g.y,g.radius,x.x,x.y,x.radius)){this.explode(g.x,g.y,g.color),this.projectiles.splice(y,1),this.explode(x.x,x.y,"white"),this.handleAsteriodExplosion(v);break}}if(!this.respawning){i=this.asteroids.length;for(var m=0;m<i;m++){var k=this.asteroids[m];if(Math.circleCollisionDetection(this.ship.x,this.ship.y,this.ship.radius,k.x,k.y,k.radius)){if(this.ship.powerups[3]&&k.mass<15){this.explode(k.x,k.y,"white"),this.handleAsteriodExplosion(m);break}this.explode(this.ship.x,this.ship.y,this.ship.color),this.audioController.trigger("ship explosion"),this.respawn()}}}i=this.ufos.length;for(var b=0;b<this.powerups.length;b++){var M=this.powerups[b];if(Math.circleCollisionDetection(this.ship.x,this.ship.y,this.ship.radius,M.pos.x,M.pos.y,M.radius)){this.explode(this.ship.x,this.ship.y,this.ship.color),this.ship.powerupTimers[M.type]>0?this.ship.updatePowerUpDisplay(M.type,M.timer):this.ship.createPowerUpDisplay(M.type,M.timer),this.pickUpPowerUp(this.ship,M),this.createPowerUpBlip(M.type),this.audioController.trigger("homing pickup"),this.powerups.splice(b,1);break}for(var C=0;C<i;C++){var S=this.ufos[C];if(Math.circleCollisionDetection(S.x,S.y,S.radius,M.pos.x,M.pos.y,M.radius)){this.explode(S.x,S.y,S.color),this.pickUpPowerUp(S,M),this.audioController.trigger("homing pickup"),this.powerups.splice(b,1);break}}}i=this.asteroids.length;for(var B=0;B<this.powerups.length;B++)for(var P=0;P<i;P++){var T=this.powerups[B],O=this.asteroids[P];if(Math.circleCollisionDetection(O.x,O.y,O.radius,T.pos.x,T.pos.y,T.radius)){this.explode(T.pos.x,T.pos.y,T.color),this.powerups.splice(B,1);break}}for(var D=0;D<this.ufos.length;D++)for(var I=0;I<this.asteroids.length;I++){var A=this.ufos[D],E=this.asteroids[I];if(this.detectShipCrash(A,E)){A.powerups[3]&&E.mass<15?(this.explode(E.x,E.y,"white"),this.handleAsteriodExplosion(I)):(this.explode(A.x,A.y,A.color),this.destoryUFO(D));break}}if((i=this.ufos.length)>0)for(var R=0;R<i;R++){var W=this.ufos[R];if(i>1)for(var F=R+1;F<i;F++){var j=this.ufos[F];if(Math.circleCollisionDetection(W.x,W.y,W.critical,j.x,j.y,j.critical)){"Dodger"!==W.type&&"Elite"!==W.type||W.reloading||this.ufoProjectile(W,j.x,j.y),"Dodger"!==j.type&&"Elite"!==j.type||j.reloading||this.ufoProjectile(j,W.x,W.y);var U=Math.getDirection(W.x,W.y,j.x,j.y);W.alterPath(U+Math.PI),j.alterPath(U)}}this.respawning||Math.circleCollisionDetection(this.ship.x,this.ship.y,this.ship.radius,W.x,W.y,W.radius)&&(this.explode(this.ship.x,this.ship.y,this.ship.color),this.audioController.trigger("ship explosion"),this.respawn())}for(var L=0;L<this.projectiles.length;L++){var K=this.projectiles[L];if(!this.respawning&&Math.circleCollisionDetection(K.x,K.y,K.radius,this.ship.x,this.ship.y,this.ship.radius)){this.projectileHit(this.ship,L)&&this.respawn();break}for(var N=0;N<this.ufos.length;N++){var G=this.ufos[N];if("Dodger"!==G.type&&"Elite"!==G.type||G.clock!==G.CLOCK){if(Math.circleCollisionDetection(K.x,K.y,K.radius,G.x,G.y,G.radius)){this.projectileHit(G,L)&&this.destoryUFO(N);break}}else if(this.projectileDodger(G,K)){this.projectileHit(G,L)&&this.destoryUFO(N);break}}}if((this.keyMap[65]||this.keyMap[37])&&(this.ship.accel.dir-=.07,this.ship.accel.dir<=-Math.tau&&(this.ship.accel.dir+=Math.tau)),(this.keyMap[68]||this.keyMap[39])&&(this.ship.accel.dir+=.07,this.ship.accel.dir>=Math.tau&&(this.ship.accel.dir-=Math.tau)),this.respawnTimer<=150||!this.respawning)if(this.ship.boosting=!1,this.keyMap[13]&&this.ship.boost>=0){this.ship.boosting=!0,this.ship.boost--,this.ship.boostGauge.boost=this.ship.boost,this.ship.updateSpeed(3*this.ship.accel.mag);var X=Math.randomInt(3,6);this.ship.createParticles(X)}else if(this.keyMap[87]||this.keyMap[38]){this.ship.updateSpeed(this.ship.accel.mag);var H=Math.randomInt(1,4);this.ship.createParticles(H)}if(!this.keyMap[32]||this.ship.reloading||this.respawning||this.createProjectile(),this.keyMap[70]&&this.teleports>0&&!this.respawning&&50===this.coolingDown&&(this.teleport(),this.teleports--,this.coolingDown--),!this.respawning){i=this.ufos.length;for(var V=0;V<i;V++){var _=this.ufos[V];_.rateOfFire--,_.rateOfFire<=0&&(this.ufoProjectile(_,this.ship.x,this.ship.y),_.setRateOfFire())}}this.coolingDown<50&&(this.coolingDown--,this.coolingDown<=0&&(this.coolingDown=50));for(var q=0;q<this.projectiles.length;q++){var z=this.projectiles[q];"green"===z.color?z.update(this.ufos):z.update(this.ship),z.edgeDetection()&&this.projectiles.splice(q,1)}for(var J=0;J<this.particles.length;J++)this.particles[J].update()}},{key:"render",value:function(){this.backBufferContext.fillStyle="black",this.backBufferContext.strokeStyle="blue",this.backBufferContext.font="50px Times New Roman",this.backBufferContext.fillRect(0,0,this.screenSide,this.screenSide);for(var t=this.ufos.length,i=0;i<t;i++)this.ufos[i].render(this.backBufferContext);(!this.respawning||this.respawnTimer<=150)&&this.ship.render(this.backBufferContext),t=this.asteroids.length;for(var e=0;e<t;e++)this.asteroids[e].render(this.backBufferContext);t=this.projectiles.length;for(var s=0;s<t;s++)this.projectiles[s].render(this.backBufferContext);t=this.powerups.length;for(var h=0;h<t;h++)this.powerups[h].render(this.backBufferContext);t=this.particles.length;for(var o=0;o<t;o++)this.particles[o].render(this.backBufferContext);t=this.popups.length;for(var r=0;r<t;r++)this.popups[r].render(this.backBufferContext);this.hudObjects.score.render(this.backBufferContext),this.hudObjects.lives.render(this.backBufferContext),this.hudObjects.level.render(this.backBufferContext),this.screenBufferContext.drawImage(this.backBufferCanvas,0,0)}},{key:"loop",value:function(){this.paused||this.gameOver||(this.update(),this.render()),this.gameOver&&this.menu.drawGameOver()}}]),t}()),S=(e(2),function(){function t(){s(this,t),this.menu=new Audio("./menu2.wav"),this.pickTheme(),this.sounds=[],this.sounds.push(this.menu),this.over=new Audio("./gameOver.wav"),this.sounds.push(this.over),this.collisionSound=new Audio("collision.wav"),this.collisionSound.volume=.5,this.sounds.push(this.collisionSound),this.explosion=new Audio("./Explosion.wav"),this.explosion.volume=.7,this.sounds.push(this.explosion),this.shipExplosion=new Audio("./shipExplosion.wav"),this.sounds.push(this.shipExplosion),this.ufoLaser=new Audio("./ufoShot.wav"),this.sounds.push(this.ufoLaser),this.homing=new Audio("./homing.wav"),this.homing.volume=.7,this.sounds.push(this.homing),this.teleportSound=new Audio("./teleport.wav"),this.sounds.push(this.teleportSound),this.shieldBreak=new Audio("./shieldbreak.wav"),this.sounds.push(this.shieldBreak),this.homingPickUp=new Audio("./homingpowerup.wav"),this.sounds.push(this.homingPickUp)}return o(t,[{key:"pickTheme",value:function(){Math.random()>.5?this.theme=new Audio("./theme.wav"):this.theme=new Audio("./theme2.wav")}},{key:"playTheme",value:function(){this.theme.volume=.1,this.theme.loop=!0,this.theme.play()}},{key:"stopTheme",value:function(){this.theme.pause()}},{key:"playMenu",value:function(){this.menu.volume=.3,this.menu.loop=!0,this.menu.play()}},{key:"stopMenu",value:function(){this.menu.pause()}},{key:"mute",value:function(){this.sounds.forEach(function(t){t.muted=!0}),this.theme.muted=!0}},{key:"unmute",value:function(){this.sounds.forEach(function(t){t.muted=!1}),this.theme.muted=!1}},{key:"trigger",value:function(t){switch(t){case"shoot":this.ufoLaser.play();break;case"homing":this.homing.play();break;case"homing pickup":this.homingPickUp.play();break;case"collision":this.collisionSound.play();break;case"explosion":this.explosion.play();break;case"shield broken":this.shieldBreak.play();break;case"ship explosion":this.shipExplosion.play();break;case"teleport":this.teleportSound.play();break;case"game over":this.over.play()}}}]),t}());e.d(i,"default",function(){return B});var B=function(){function t(){s(this,t),this.screenWidth=1e3,this.gameState="main menu",this.game=null,this.highlighted=0,this.buttons=[],this.buttonNames=["start","mute","controls"],this.musicStarted=!1,this.muted=!1,this.initButtons(),this.audioController=new S,this.backBufferCanvas=document.getElementById("canvas"),this.backBufferCanvas.width=this.screenWidth,this.backBufferCanvas.height=this.screenWidth,this.backBufferContext=this.backBufferCanvas.getContext("2d"),this.screenBufferCanvas=document.getElementById("canvas"),this.screenBufferCanvas.width=this.screenWidth,this.screenBufferCanvas.height=this.screenWidth,document.body.appendChild(this.screenBufferCanvas),this.screenBufferContext=this.screenBufferCanvas.getContext("2d"),this.render=this.render.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),window.onmousedown=this.handleMouseDown,window.onkeydown=this.handleKeyDown,this.interval=setInterval(this.render,50/3)}return o(t,[{key:"initButtons",value:function(){for(var t=.3,i=0;i<3;i++)this.buttons.push({x:.35*this.screenWidth,y:this.screenWidth*t,width:.3*this.screenWidth,height:.1*this.screenWidth}),t+=.15}},{key:"handleKeyDown",value:function(t){t.preventDefault(),this.musicStarted||(this.audioController.playMenu(),this.musicStarted=!0),"main menu"===this.gameState?(13===t.keyCode&&this.clickButton(this.buttonNames[this.highlighted]),87!==t.keyCode&&38!==t.keyCode||(this.highlighted--,this.highlighted<0&&(this.highlighted=this.buttons.length-1)),83!==t.keyCode&&40!==t.keyCode||(this.highlighted++,this.highlighted>=this.buttons.length&&(this.highlighted=0))):"controls"===this.gameState&&(this.gameState="main menu")}},{key:"handleMouseDown",value:function(t){t.preventDefault(),this.musicStarted||(this.audioController.playMenu(),this.musicStarted=!0);var i=5*t.clientX/4,e=5*t.clientY/4;if("main menu"===this.gameState||"paused"===this.gameState)for(var s=0;s<this.buttons.length;s++){Math.circleRectangleCollision(i,e,10,this.buttons[s].x,this.buttons[s].y,this.buttons[s].width,this.buttons[s].height)&&this.clickButton(this.buttonNames[s])}else if("controls"===this.gameState)this.gameState="main menu";else if("gameOver"===this.gameState)for(var h=1;h<this.buttons.length;h++){Math.circleRectangleCollision(i,e,10,this.buttons[h].x,this.buttons[h].y,this.buttons[h].width,this.buttons[h].height)&&this.clickButton(this.buttonNames[h])}}},{key:"clickButton",value:function(t){switch(t){case"start":case"restart":case 0:null!==this.game?(this.audioController.stopTheme(),this.muted||this.audioController.pickTheme(),this.game.masterReset(),this.gameState="game",this.audioController.stopMenu(),this.audioController.playTheme()):(this.game=new C(this),this.gameState="game",this.audioController.playTheme(),this.audioController.stopMenu()),clearInterval(this.interval);break;case"mute":case 1:this.muted?(this.audioController.unmute(),this.muted=!1):(this.audioController.mute(),this.muted=!0);break;case"controls":case 2:this.gameState="controls";break;case"resume":this.gameState="game",this.game.paused=!1}}},{key:"drawMenu",value:function(){this.backBufferContext.save(),this.backBufferContext.fillStyle="blue";for(var t=0;t<this.buttons.length;t++)this.highlighted===t?this.backBufferContext.strokeStyle="cyan":this.backBufferContext.strokeStyle="blue",this.backBufferContext.strokeRect(this.buttons[t].x,this.buttons[t].y,this.buttons[t].width,this.buttons[t].height);this.backBufferContext.fillText("Start",.44*this.screenWidth,.37*this.screenWidth),this.backBufferContext.fillText("Mute",.44*this.screenWidth,.52*this.screenWidth),this.backBufferContext.fillText("Controls",.41*this.screenWidth,.67*this.screenWidth),this.backBufferContext.fillText("By: Troy Nagle",.02*this.screenWidth,.98*this.screenWidth),this.backBufferContext.font="120px Times New Roman",this.backBufferContext.fillText("Asteroids",.05*this.screenWidth,.25*this.screenWidth),this.backBufferContext.fillText(" & ",.5*this.screenWidth,.25*this.screenWidth),this.backBufferContext.fillText("Aliens",.65*this.screenWidth,.25*this.screenWidth),this.backBufferContext.restore(),this.screenBufferContext.drawImage(this.backBufferCanvas,0,0)}},{key:"drawControls",value:function(){this.backBufferContext.save(),this.backBufferContext.fillStyle="blue",this.backBufferContext.fillText("W or Up Arrow: Thruster",.2*this.screenWidth,.25*this.screenWidth),this.backBufferContext.fillText("A or Left Arrow: Rotate Left",.17*this.screenWidth,.35*this.screenWidth),this.backBufferContext.fillText("D or Right Arrow: Rotate Right",.15*this.screenWidth,.45*this.screenWidth),this.backBufferContext.fillText("Spacebar: Shoot",.29*this.screenWidth,.55*this.screenWidth),this.backBufferContext.fillText("Enter: Boost",.34*this.screenWidth,.65*this.screenWidth),this.backBufferContext.fillText("F: Teleport",.36*this.screenWidth,.75*this.screenWidth),this.backBufferContext.fillText("Any Key to Go Back",.26*this.screenWidth,.9*this.screenWidth),this.backBufferContext.restore(),this.screenBufferContext.drawImage(this.backBufferCanvas,0,0)}},{key:"drawPauseMenu",value:function(){this.backBufferContext.save(),this.backBufferContext.fillStyle="black",this.backBufferContext.strokeStyle="blue";for(var t=0;t<this.buttons.length;t++)this.backBufferContext.fillRect(this.buttons[t].x,this.buttons[t].y,this.buttons[t].width,this.buttons[t].height),this.backBufferContext.strokeRect(this.buttons[t].x,this.buttons[t].y,this.buttons[t].width,this.buttons[t].height);this.backBufferContext.fillStyle="blue",this.backBufferContext.fillText("Resume",.42*this.screenWidth,.37*this.screenWidth),this.backBufferContext.fillText("Restart",.43*this.screenWidth,.52*this.screenWidth),this.backBufferContext.fillText("Mute",.44*this.screenWidth,.67*this.screenWidth),this.backBufferContext.restore(),this.screenBufferContext.drawImage(this.backBufferCanvas,0,0)}},{key:"drawGameOver",value:function(){this.backBufferContext.save(),this.backBufferContext.fillStyle="black",this.backBufferContext.strokeStyle="blue";for(var t=1;t<this.buttons.length;t++)this.backBufferContext.fillRect(this.buttons[t].x,this.buttons[t].y,this.buttons[t].width,this.buttons[t].height),this.backBufferContext.strokeRect(this.buttons[t].x,this.buttons[t].y,this.buttons[t].width,this.buttons[t].height);this.backBufferContext.fillStyle="blue",this.backBufferContext.font="100px Times New Roman",this.backBufferContext.fillText("Game Over",.3*this.screenWidth,.3*this.screenWidth),this.backBufferContext.font="50px Arial",this.backBufferContext.fillText("Restart",.43*this.screenWidth,.52*this.screenWidth),this.backBufferContext.fillText("Mute",.44*this.screenWidth,.67*this.screenWidth),this.backBufferContext.restore(),this.screenBufferContext.drawImage(this.backBufferCanvas,0,0)}},{key:"render",value:function(){this.backBufferContext.fillStyle="black",this.backBufferContext.font="50px Arial",this.backBufferContext.fillRect(0,0,this.screenWidth,this.screenWidth),"main menu"===this.gameState?this.drawMenu():"controls"===this.gameState&&this.drawControls()}}]),t}();new B}],[[0,1]]]);
//# sourceMappingURL=main.4f5efbf8.chunk.js.map